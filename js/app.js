!function i(s,a,c){function u(e,t){if(!a[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[e]={exports:{}};s[e][0].call(o.exports,function(t){return u(s[e][1][t]||t)},o,o.exports,i,s,a,c)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,n,r){(function(Z,H,u){!function(t){if("object"==typeof r&&void 0!==n)n.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:void 0!==H?e=H:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,n;return function i(s,a,c){function u(n,t){if(!a[n]){if(!s[n]){var e="function"==typeof _dereq_&&_dereq_;if(!t&&e)return e(n,!0);if(l)return l(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[n]={exports:{}};s[n][0].call(o.exports,function(t){var e=s[n][1][t];return u(e||t)},o,o.exports,i,s,a,c)}return a[n].exports}for(var l="function"==typeof _dereq_&&_dereq_,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,e,n){"use strict";e.exports=function(t){var r=t._SomePromiseArray;function e(t){var e=new r(t),n=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),n}t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,n){"use strict";var r;try{throw new Error}catch(t){r=t}var o=t("./schedule"),i=t("./queue"),s=t("./util");function a(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new i(16),this._normalQueue=new i(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o}function c(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function u(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function l(t){this._normalQueue._pushOne(t),this._queueTick()}function f(t){for(;0<t.length();)h(t)}function h(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var n=t.shift(),r=t.shift();e.call(n,r)}}a.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},a.prototype.hasCustomScheduler=function(){return this._customScheduler},a.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},a.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=!1)},a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},a.prototype.fatalError=function(t,e){e?(Z.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),Z.exit(2)):this.throwLater(t)},a.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.prototype.settlePromises=s.hasDevTools?(a.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?c.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},a.prototype.invoke=function(t,e,n){this._trampolineEnabled?u.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},function(t){this._trampolineEnabled?l.call(this,t):this._schedule(function(){t._settlePromises()})}):(a.prototype.invokeLater=c,a.prototype.invoke=u,l),a.prototype._drainQueues=function(){f(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,f(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},e.exports=a,e.exports.firstLineError=r},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(i,s,a,c){var u=!1,n=function(t,e){this._reject(e)},l=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(n,n,null,this,t)},f=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},h=function(t,e){e.promiseRejectionQueued||this._reject(t)};i.prototype.bind=function(t){u||(u=!0,i.prototype._propagateFrom=c.propagateFromFunction(),i.prototype._boundValue=c.boundValueFunction());var e=a(t),n=new i(s);n._propagateFrom(this,1);var r=this._target();if(n._setBoundTo(e),e instanceof i){var o={promiseRejectionQueued:!1,promise:n,target:r,bindingPromise:e};r._then(s,l,void 0,n,o),e._then(f,h,void 0,n,o),n._setOnCancel(e)}else n._resolveCallback(r);return n},i.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},i.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},i.bind=function(t,e){return i.resolve(e).bind(t)}}},{}],4:[function(t,e,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var o=t("./promise")();o.noConflict=function(){try{Promise===o&&(Promise=r)}catch(t){}return o},e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var o=r(null),i=r(null);o[" size"]=i[" size"]=0}e.exports=function(o){var r,i=t("./util"),s=i.canEvaluate;i.isIdentifier;function e(t,e){var n;if(null!=t&&(n=t[e]),"function"==typeof n)return n;var r="Object "+i.classString(t)+" has no method '"+i.toString(e)+"'";throw new o.TypeError(r)}function n(t){return e(t,this.pop()).apply(t,this)}function a(t){return t[this]}function c(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}o.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(n,void 0,void 0,e,void 0)},o.prototype.get=function(t){var e;if("number"==typeof t)e=c;else if(s){var n=r(t);e=null!==n?n:a}else e=a;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(c,t,e){"use strict";t.exports=function(t,e,n,r){var o=c("./util"),i=o.tryCatch,s=o.errorObj,a=t._async;t.prototype.break=t.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),a.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=i(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),a.throwLater(r.e))}}else t._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),a.invoke(this._doInvokeOnCancel,this,t)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(f){var h=t("./util"),p=t("./es5").keys,d=h.tryCatch,v=h.errorObj;return function(c,u,l){return function(t){var e=l._boundValue();t:for(var n=0;n<c.length;++n){var r=c[n];if(r===Error||null!=r&&r.prototype instanceof Error){if(t instanceof r)return d(u).call(e,t)}else if("function"==typeof r){var o=d(r).call(e,t);if(o===v)return o;if(o)return d(u).call(e,t)}else if(h.isObject(t)){for(var i=p(r),s=0;s<i.length;++s){var a=i[s];if(r[a]!=t[a])continue t}return d(u).call(e,t)}}return f}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(i){var s=!1,n=[];function a(){this._trace=new a.CapturedTrace(c())}function c(){var t=n.length-1;if(0<=t)return n[t]}return i.prototype._promiseCreated=function(){},i.prototype._pushContext=function(){},i.prototype._popContext=function(){return null},i._peekContext=i.prototype._peekContext=function(){},a.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},a.prototype._popContext=function(){if(void 0===this._trace)return null;var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e},a.CapturedTrace=null,a.create=function(){if(s)return new a},a.deactivateLongStackTraces=function(){},a.activateLongStackTraces=function(){var t=i.prototype._pushContext,e=i.prototype._popContext,n=i._peekContext,r=i.prototype._peekContext,o=i.prototype._promiseCreated;a.deactivateLongStackTraces=function(){i.prototype._pushContext=t,i.prototype._popContext=e,i._peekContext=n,i.prototype._peekContext=r,i.prototype._promiseCreated=o,s=!1},s=!0,i.prototype._pushContext=a.prototype._pushContext,i.prototype._popContext=a.prototype._popContext,i._peekContext=i.prototype._peekContext=c,i.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},a}},{}],9:[function(J,t,e){"use strict";t.exports=function(s,r){var n,o,i,a=s._getDomain,c=s._async,u=J("./errors").Warning,l=J("./util"),f=J("./es5"),h=l.canAttachTrace,p=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,v=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,y=null,_=null,b=!1,t=!(0==l.env("BLUEBIRD_DEBUG")),e=!(0==l.env("BLUEBIRD_WARNINGS")||!t&&!l.env("BLUEBIRD_WARNINGS")),m=!(0==l.env("BLUEBIRD_LONG_STACK_TRACES")||!t&&!l.env("BLUEBIRD_LONG_STACK_TRACES")),g=0!=l.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(e||!!l.env("BLUEBIRD_W_FORGOTTEN_RETURN"));s.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},s.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},s.prototype._notifyUnhandledRejectionIsHandled=function(){B("rejectionHandled",n,void 0,this)},s.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},s.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},s.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),B("unhandledRejection",o,t,this)}},s.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},s.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},s.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},s.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},s.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},s.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},s.prototype._warn=function(t,e,n){return U(t,e,n||this)},s.onPossiblyUnhandledRejection=function(t){var e=a();o="function"==typeof t?null===e?t:l.domainBind(e,t):void 0},s.onUnhandledRejectionHandled=function(t){var e=a();n="function"==typeof t?null===e?t:l.domainBind(e,t):void 0};var w=function(){};s.longStackTraces=function(){if(c.haveItemsQueued()&&!K.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!K.longStackTraces&&W()){var t=s.prototype._captureStackTrace,e=s.prototype._attachExtraTrace,n=s.prototype._dereferenceTrace;K.longStackTraces=!0,w=function(){if(c.haveItemsQueued()&&!K.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");s.prototype._captureStackTrace=t,s.prototype._attachExtraTrace=e,s.prototype._dereferenceTrace=n,r.deactivateLongStackTraces(),c.enableTrampoline(),K.longStackTraces=!1},s.prototype._captureStackTrace=M,s.prototype._attachExtraTrace=N,s.prototype._dereferenceTrace=L,r.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},s.hasLongStackTraces=function(){return K.longStackTraces&&W()};var E=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return l.global.dispatchEvent(t),function(t,e){var n={detail:e,cancelable:!0};f.defineProperty(n,"promise",{value:e.promise}),f.defineProperty(n,"reason",{value:e.reason});var r=new CustomEvent(t.toLowerCase(),n);return!l.global.dispatchEvent(r)}}if("function"!=typeof Event)return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),l.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!l.global.dispatchEvent(n)};var t=new Event("CustomEvent");return l.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,f.defineProperty(n,"promise",{value:e.promise}),f.defineProperty(n,"reason",{value:e.reason}),!l.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),C=l.isNode?function(){return Z.emit.apply(Z,arguments)}:l.global?function(t){var e="on"+t.toLowerCase(),n=l.global[e];return!!n&&(n.apply(l.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function S(t,e){return{promise:e}}var j={promiseCreated:S,promiseFulfilled:S,promiseRejected:S,promiseResolved:S,promiseCancelled:S,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:S},k=function(t){var e=!1;try{e=C.apply(null,arguments)}catch(t){c.throwLater(t),e=!0}var n=!1;try{n=E(t,j[t].apply(null,arguments))}catch(t){c.throwLater(t),n=!0}return n||e};function x(){return!1}function O(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+l.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function T(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?l.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function P(){return this._onCancelField}function A(t){this._onCancelField=t}function F(){this._cancellationParent=void 0,this._onCancelField=void 0}function R(t,e){if(0!=(1&e)){var n=(this._cancellationParent=t)._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}s.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?s.longStackTraces():!t.longStackTraces&&s.hasLongStackTraces()&&w()),"warnings"in t){var e=t.warnings;K.warnings=!!e,g=K.warnings,l.isObject(e)&&"wForgottenReturn"in e&&(g=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!K.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");s.prototype._clearCancellationData=F,s.prototype._propagateFrom=R,s.prototype._onCancel=P,s.prototype._setOnCancel=A,s.prototype._attachCancellationCallback=T,s.prototype._execute=O,I=R,K.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!K.monitoring?(K.monitoring=!0,s.prototype._fireEvent=k):!t.monitoring&&K.monitoring&&(K.monitoring=!1,s.prototype._fireEvent=x)),s},s.prototype._fireEvent=x,s.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},s.prototype._onCancel=function(){},s.prototype._setOnCancel=function(t){},s.prototype._attachCancellationCallback=function(t){},s.prototype._captureStackTrace=function(){},s.prototype._attachExtraTrace=function(){},s.prototype._dereferenceTrace=function(){},s.prototype._clearCancellationData=function(){},s.prototype._propagateFrom=function(t,e){};var I=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function D(){var t=this._boundTo;return void 0!==t&&t instanceof s?t.isFulfilled()?t.value():void 0:t}function M(){this._trace=new X(this._peekContext())}function N(t,e){if(h(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=q(t);l.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),l.notEnumerableProp(t,"__stackCleaned__",!0)}}}function L(){this._trace=void 0}function U(t,e,n){if(K.warnings){var r,o=new u(t);if(e)n._attachExtraTrace(o);else if(K.longStackTraces&&(r=s._peekContext()))r.attachExtraTrace(o);else{var i=q(o);o.stack=i.message+"\n"+i.stack.join("\n")}k("warning",o)||H(o,"",!0)}}function V(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],o="    (No stack trace)"===r||y.test(r),i=o&&Q(r);o&&!i&&(b&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function q(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&0<e.length?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||y.test(r))break}return 0<n&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:V(e)}}function H(t,e,n){if("undefined"!=typeof console){var r;if(l.isObject(t)){var o=t.stack;r=e+_(o,t)}else r=e+String(t);"function"==typeof i?i(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function B(t,e,n,r){var o=!1;try{"function"==typeof e&&(o=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){c.throwLater(t)}"unhandledRejection"===t?k(t,n,r)||o||H(n,"Unhandled rejection "):k(t,r)}function G(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():l.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}function W(){return"function"==typeof Y}var Q=function(){return!1},z=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function $(t){var e=t.match(z);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function X(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);Y(this,X),32<e&&this.uncycle()}l.inherits(X,Error),(r.CapturedTrace=X).prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,o=this;void 0!==o;++r)e.push(o),o=o._parent;for(r=(t=this._length=r)-1;0<=r;--r){var i=e[r].stack;void 0===n[i]&&(n[i]=r)}for(r=0;r<t;++r){var s=n[e[r].stack];if(void 0!==s&&s!==r){0<s&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var a=0<r?e[r-1]:this;a._length=s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._parent._length+1):(a._parent=void 0,1);for(var c=a._length+1,u=r-2;0<=u;--u)e[u]._length=c,c++;return}}}},X.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=q(t),n=e.message,r=[e.stack],o=this;void 0!==o;)r.push(V(o.stack.split("\n"))),o=o._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],o=e.length-1,i=e[o],s=-1,a=r.length-1;0<=a;--a)if(r[a]===i){s=a;break}for(a=s;0<=a;--a){var c=r[a];if(e[o]!==c)break;e.pop(),o--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),l.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,r)),l.notEnumerableProp(t,"__stackCleaned__",!0)}};var Y=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():G(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,y=t,_=e;var n=Error.captureStackTrace;return Q=function(t){return p.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r,o=new Error;if("string"==typeof o.stack&&0<=o.stack.split("\n")[0].indexOf("stackDetection@"))return y=/@/,_=e,b=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){r="stack"in t}return"stack"in o||!r||"number"!=typeof Error.stackTraceLimit?(_=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?G(e):e.toString()},null):(y=t,_=e,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(i=function(t){console.warn(t)},l.isNode&&Z.stderr.isTTY?i=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:l.isNode||"string"!=typeof(new Error).stack||(i=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var K={warnings:e,longStackTraces:!1,cancellation:!1,monitoring:!1};return m&&s.longStackTraces(),{longStackTraces:function(){return K.longStackTraces},warnings:function(){return K.warnings},cancellation:function(){return K.cancellation},monitoring:function(){return K.monitoring},propagateFromFunction:function(){return I},boundValueFunction:function(){return D},checkForgottenReturns:function(t,e,n,r,o){if(void 0===t&&null!==e&&g){if(void 0!==o&&o._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var i="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),c=V(a),u=c.length-1;0<=u;--u){var l=c[u];if(!d.test(l)){var f=l.match(v);f&&(i="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(0<c.length){var h=c[0];for(u=0;u<a.length;++u)if(a[u]===h){0<u&&(s="\n"+a[u-1]);break}}}var p="a promise was created in a "+n+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(p,!0,e)}},setBounds:function(t,e){if(W()){for(var n,r,o=t.stack.split("\n"),i=e.stack.split("\n"),s=-1,a=-1,c=0;c<o.length;++c)if(u=$(o[c])){n=u.fileName,s=u.line;break}for(c=0;c<i.length;++c){var u;if(u=$(i[c])){r=u.fileName,a=u.line;break}}s<0||a<0||!n||!r||n!==r||a<=s||(Q=function(t){if(p.test(t))return!0;var e=$(t);return!!(e&&e.fileName===n&&s<=e.line&&e.line<=a)})}},warn:U,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),U(n)},CapturedTrace:X,fireDomEvent:E,fireGlobalEvent:C}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(n){function r(){return this.value}function o(){throw this.reason}n.prototype.return=n.prototype.thenReturn=function(t){return t instanceof n&&t.suppressUnhandledRejections(),this._then(r,void 0,void 0,{value:t},void 0)},n.prototype.throw=n.prototype.thenThrow=function(t){return this._then(o,void 0,void 0,{reason:t},void 0)},n.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,o,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},n.prototype.catchReturn=function(t){if(arguments.length<=1)return t instanceof n&&t.suppressUnhandledRejections(),this._then(void 0,r,void 0,{value:t},void 0);var e=arguments[1];e instanceof n&&e.suppressUnhandledRejections();return this.caught(t,function(){return e})}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,n){var r=t.reduce,e=t.all;function o(){return e(this)}t.prototype.each=function(t){return r(this,t,n,0)._then(o,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return r(this,t,n,n)},t.each=function(t,e){return r(t,e,n,0)._then(o,void 0,void 0,t,void 0)},t.mapSeries=function(t,e){return r(t,e,n,n)}}},{}],12:[function(t,e,n){"use strict";var r,o,i=t("./es5"),s=i.freeze,a=t("./util"),c=a.inherits,u=a.notEnumerableProp;function l(e,n){function r(t){if(!(this instanceof r))return new r(t);u(this,"message","string"==typeof t?t:n),u(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(r,Error),r}var f=l("Warning","warning"),h=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),d=l("AggregateError","aggregate error");try{r=TypeError,o=RangeError}catch(t){r=l("TypeError","type error"),o=l("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<v.length;++y)"function"==typeof Array.prototype[v[y]]&&(d.prototype[v[y]]=Array.prototype[v[y]]);i.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var _=0;function b(t){if(!(this instanceof b))return new b(t);u(this,"name","OperationalError"),u(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(u(this,"message",t.message),u(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var t=Array(4*_+1).join(" "),e="\n"+t+"AggregateError of:\n";_++,t=Array(4*_+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",o=r.split("\n"),i=0;i<o.length;++i)o[i]=t+o[i];e+=(r=o.join("\n"))+"\n"}return _--,e},c(b,Error);var m=Error.__BluebirdErrorTypes__;m||(m=s({CancellationError:h,TimeoutError:p,OperationalError:b,RejectionError:b,AggregateError:d}),i.defineProperty(Error,"__BluebirdErrorTypes__",{value:m,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:r,RangeError:o,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var o={}.hasOwnProperty,i={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)o.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===i.call(t)}catch(t){return!1}},keys:a,names:a,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return s}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,r){var o=t.map;t.prototype.filter=function(t,e){return o(this,t,e,r)},t.filter=function(t,e,n){return o(t,e,n,r)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(a,s,c){var u=t("./util"),l=a.CancellationError,f=u.errorObj,h=t("./catch_filter")(c);function o(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function p(t){this.finallyHandler=t}function d(t,e){return null!=t.cancelPromise&&(1<arguments.length?t.cancelPromise._reject(e):t.cancelPromise._cancel(),!(t.cancelPromise=null))}function v(){return _.call(this,this.promise._target()._settledValue())}function y(t){if(!d(this,t))return f.e=t,f}function _(t){var e=this.promise,n=this.handler;if(!this.called){this.called=!0;var r=this.isFinallyHandler()?n.call(e._boundValue()):n.call(e._boundValue(),t);if(r===c)return r;if(void 0!==r){e._setReturnedNonUndefined();var o=s(r,e);if(o instanceof a){if(null!=this.cancelPromise){if(o._isCancelled()){var i=new l("late cancellation observer");return e._attachExtraTrace(i),f.e=i,f}o.isPending()&&o._attachCancellationCallback(new p(this))}return o._then(v,y,void 0,this,void 0)}}}return e.isRejected()?(d(this),f.e=t,f):(d(this),t)}return o.prototype.isFinallyHandler=function(){return 0===this.type},p.prototype._resultCancelled=function(){d(this.finallyHandler)},a.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new o(this,e,t),void 0)},a.prototype.lastly=a.prototype.finally=function(t){return this._passThrough(t,0,_,_)},a.prototype.tap=function(t){return this._passThrough(t,1,_)},a.prototype.tapCatch=function(t){var e=arguments.length;if(1===e)return this._passThrough(t,1,void 0,_);var n,r=new Array(e-1),o=0;for(n=0;n<e-1;++n){var i=arguments[n];if(!u.isObject(i))return a.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(i)));r[o++]=i}r.length=o;var s=arguments[n];return this._passThrough(h(r,s,this),1,void 0,_)},o}},{"./catch_filter":7,"./util":36}],16:[function(n,t,e){"use strict";t.exports=function(a,r,s,c,t,u){var l=n("./errors").TypeError,e=n("./util"),f=e.errorObj,h=e.tryCatch,p=[];function d(t,e,n,r){if(u.cancellation()){var o=new a(s),i=this._finallyPromise=new a(s);this._promise=o.lastly(function(){return i}),o._captureStackTrace(),o._setOnCancel(this)}else{(this._promise=new a(s))._captureStackTrace()}this._stack=r,this._generatorFunction=t,this._receiver=e,this._generator=void 0,this._yieldHandlers="function"==typeof n?[n].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}e.inherits(d,t),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,u.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=h(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var e=new a.CancellationError("generator .return() sentinel");a.coroutine.returnSentinel=e,this._promise._attachExtraTrace(e),this._promise._pushContext(),t=h(this._generator.throw).call(this._generator,e),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},d.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=h(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},d.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=h(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof a){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(t){var e=this._promise;if(t===f)return this._cleanup(),this._cancellationPhase?e.cancel():e._rejectCallback(t.e,!1);var n=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?e.cancel():e._resolveCallback(n);var r=c(n,this._promise);if(r instanceof a||null!==(r=function(t,e,n){for(var r=0;r<e.length;++r){n._pushContext();var o=h(e[r])(t);if(n._popContext(),o===f){n._pushContext();var i=a.reject(f.e);return n._popContext(),i}var s=c(o,n);if(s instanceof a)return s}return null}(r,this._yieldHandlers,this._promise))){var o=(r=r._target())._bitField;0==(50397184&o)?(this._yieldedPromise=r)._proxy(this,null):0!=(33554432&o)?a._async.invoke(this._promiseFulfilled,this,r._value()):0!=(16777216&o)?a._async.invoke(this._promiseRejected,this,r._reason()):this._promiseCancelled()}else this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},a.coroutine=function(r,t){if("function"!=typeof r)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var o=Object(t).yieldHandler,i=d,s=(new Error).stack;return function(){var t=r.apply(this,arguments),e=new i(void 0,void 0,o,s),n=e.promise();return e._generator=t,e._promiseFulfilled(void 0),n}},a.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+e.classString(t));p.push(t)},a.spawn=function(t){if(u.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var e=new d(t,this),n=e.promise();return e._run(a.spawn),n}}},{"./errors":12,"./util":36}],17:[function(a,t,e){"use strict";t.exports=function(t,o,e,n,r,i){var s=a("./util");s.canEvaluate,s.tryCatch,s.errorObj;t.join=function(){var t,e=arguments.length-1;0<e&&"function"==typeof arguments[e]&&(t=arguments[e]);var n=[].slice.call(arguments);t&&n.pop();var r=new o(n).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(p,t,i,d,s,v){var a=p._getDomain,c=e("./util"),y=c.tryCatch,_=c.errorObj,u=p._async;function l(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var o=a();this._callback=null===o?e:c.domainBind(o,e),this._preservedValues=r===s?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],u.invoke(this._asyncInit,this,void 0)}function o(t,e,n,r){if("function"!=typeof e)return i("expecting a function but got "+c.classString(e));var o=0;if(void 0!==n){if("object"!=typeof n||null===n)return p.reject(new TypeError("options argument must be an object but it is "+c.classString(n)));if("number"!=typeof n.concurrency)return p.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(n.concurrency)));o=n.concurrency}return new l(t,e,o="number"==typeof o&&isFinite(o)&&1<=o?o:0,r).promise()}c.inherits(l,t),l.prototype._asyncInit=function(){this._init$(void 0,-2)},l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,e){var n=this._values,r=this.length(),o=this._preservedValues,i=this._limit;if(e<0){if(n[e=-1*e-1]=t,1<=i&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(1<=i&&this._inFlight>=i)return n[e]=t,this._queue.push(e),!1;null!==o&&(o[e]=t);var s=this._promise,a=this._callback,c=s._boundValue();s._pushContext();var u=y(a).call(c,t,e,r),l=s._popContext();if(v.checkForgottenReturns(u,l,null!==o?"Promise.filter":"Promise.map",s),u===_)return this._reject(u.e),!0;var f=d(u,this._promise);if(f instanceof p){var h=(f=f._target())._bitField;if(0==(50397184&h))return 1<=i&&this._inFlight++,(n[e]=f)._proxy(this,-1*(e+1)),!1;if(0==(33554432&h))return 0!=(16777216&h)?this._reject(f._reason()):this._cancel(),!0;u=f._value()}n[e]=u}return r<=++this._totalResolved&&(null!==o?this._filter(n,o):this._resolve(n),!0)},l.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;0<t.length&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},l.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),o=0,i=0;i<n;++i)t[i]&&(r[o++]=e[i]);r.length=o,this._resolve(r)},l.prototype.preservedValues=function(){return this._preservedValues},p.prototype.map=function(t,e){return o(this,t,e,null)},p.map=function(t,e,n,r){return o(t,e,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(s,a,t,c,u){var l=e("./util"),f=l.tryCatch;s.method=function(r){if("function"!=typeof r)throw new s.TypeError("expecting a function but got "+l.classString(r));return function(){var t=new s(a);t._captureStackTrace(),t._pushContext();var e=f(r).apply(this,arguments),n=t._popContext();return u.checkForgottenReturns(e,n,"Promise.method",t),t._resolveFromSyncValue(e),t}},s.attempt=s.try=function(t){if("function"!=typeof t)return c("expecting a function but got "+l.classString(t));var e,n=new s(a);if(n._captureStackTrace(),n._pushContext(),1<arguments.length){u.deprecated("calling Promise.try with more than 1 argument");var r=arguments[1],o=arguments[2];e=l.isArray(r)?f(t).apply(o,r):f(t).call(o,r)}else e=f(t)();var i=n._popContext();return u.checkForgottenReturns(e,i,"Promise.try",n),n._resolveFromSyncValue(e),n},s.prototype._resolveFromSyncValue=function(t){t===l.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var s=t("./util"),a=s.maybeWrapAsError,c=t("./errors").OperationalError,u=t("./es5");var l=/^(?:name|message|stack|cause)$/;function f(t){var e,n;if((n=t)instanceof Error&&u.getPrototypeOf(n)===Error.prototype){(e=new c(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var r=u.keys(t),o=0;o<r.length;++o){var i=r[o];l.test(i)||(e[i]=t[i])}return e}return s.markAsOriginatingFromRejection(t),t}e.exports=function(o,i){return function(t,e){if(null!==o){if(t){var n=f(a(t));o._attachExtraTrace(n),o._reject(n)}else if(i){var r=[].slice.call(arguments,1);o._fulfill(r)}else o._fulfill(e);o=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){var r=e("./util"),o=t._async,i=r.tryCatch,s=r.errorObj;function a(t,e){if(!r.isArray(t))return c.call(this,t,e);var n=i(e).apply(this._boundValue(),[null].concat(t));n===s&&o.throwLater(n.e)}function c(t,e){var n=this._boundValue(),r=void 0===t?i(e).call(n,null):i(e).call(n,null,t);r===s&&o.throwLater(r.e)}function u(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var r=i(e).call(this._boundValue(),t);r===s&&o.throwLater(r.e)}t.prototype.asCallback=t.prototype.nodeify=function(t,e){if("function"==typeof t){var n=c;void 0!==e&&Object(e).spread&&(n=a),this._then(n,u,void 0,this,t)}return this}}},{"./util":36}],22:[function(P,A,t){"use strict";A.exports=function(){var c=function(){return new f("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},a=function(){return new k.PromiseInspection(this._target())},s=function(t){return k.reject(new f(t))};function u(){}var p,l={},d=P("./util");p=d.isNode?function(){var t=Z.domain;return void 0===t&&(t=null),t}:function(){return null},d.notEnumerableProp(k,"_getDomain",p);var t=P("./es5"),e=P("./async"),v=new e;t.defineProperty(k,"_async",{value:v});var n=P("./errors"),f=k.TypeError=n.TypeError;k.RangeError=n.RangeError;var y=k.CancellationError=n.CancellationError;k.TimeoutError=n.TimeoutError,k.OperationalError=n.OperationalError,k.RejectionError=n.OperationalError,k.AggregateError=n.AggregateError;var _=function(){},h={},b={},m=P("./thenables")(k,_),g=P("./promise_array")(k,_,m,s,u),r=P("./context")(k),o=r.create,w=P("./debuggability")(k,r),E=(w.CapturedTrace,P("./finally")(k,m,b)),C=P("./catch_filter")(b),i=P("./nodeback"),S=d.errorObj,j=d.tryCatch;function k(t){t!==_&&function(t,e){if(null==t||t.constructor!==k)throw new f("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new f("expecting a function but got "+d.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function x(t){this.promise._resolveCallback(t)}function O(t){this.promise._rejectCallback(t,!1)}function T(t){var e=new k(_);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return k.prototype.toString=function(){return"[object Promise]"},k.prototype.caught=k.prototype.catch=function(t){var e=arguments.length;if(1<e){var n,r=new Array(e-1),o=0;for(n=0;n<e-1;++n){var i=arguments[n];if(!d.isObject(i))return s("Catch statement predicate: expecting an object but got "+d.classString(i));r[o++]=i}return r.length=o,t=arguments[n],this.then(void 0,C(r,t,this))}return this.then(void 0,t)},k.prototype.reflect=function(){return this._then(a,a,void 0,this,void 0)},k.prototype.then=function(t,e){if(w.warnings()&&0<arguments.length&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+d.classString(t);1<arguments.length&&(n+=", "+d.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},k.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},k.prototype.spread=function(t){return"function"!=typeof t?s("expecting a function but got "+d.classString(t)):this.all()._then(t,void 0,void 0,h,void 0)},k.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},k.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),new g(this).promise()},k.prototype.error=function(t){return this.caught(d.originatesFromRejection,t)},k.getNewLibraryCopy=A.exports,k.is=function(t){return t instanceof k},k.fromNode=k.fromCallback=function(t){var e=new k(_);e._captureStackTrace();var n=1<arguments.length&&!!Object(arguments[1]).multiArgs,r=j(t)(i(e,n));return r===S&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},k.all=function(t){return new g(t).promise()},k.resolve=k.fulfilled=k.cast=function(t){var e=m(t);return e instanceof k||((e=new k(_))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},k.reject=k.rejected=function(t){var e=new k(_);return e._captureStackTrace(),e._rejectCallback(t,!0),e},k.setScheduler=function(t){if("function"!=typeof t)throw new f("expecting a function but got "+d.classString(t));return v.setScheduler(t)},k.prototype._then=function(t,e,n,r,o){var i=void 0!==o,s=i?o:new k(_),a=this._target(),c=a._bitField;i||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&c)?this._boundValue():a===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var u=p();if(0!=(50397184&c)){var l,f,h=a._settlePromiseCtx;0!=(33554432&c)?(f=a._rejectionHandler0,l=t):0!=(16777216&c)?(f=a._fulfillmentHandler0,l=e,a._unsetRejectionIsUnhandled()):(h=a._settlePromiseLateCancellationObserver,f=new y("late cancellation observer"),a._attachExtraTrace(f),l=e),v.invoke(h,a,{handler:null===u?l:"function"==typeof l&&d.domainBind(u,l),promise:s,receiver:r,value:f})}else a._addCallbacks(t,e,s,r,u);return s},k.prototype._length=function(){return 65535&this._bitField},k.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},k.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},k.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},k.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},k.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},k.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},k.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},k.prototype._isFinal=function(){return 0<(4194304&this._bitField)},k.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},k.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},k.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},k.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},k.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==l)return void 0===e&&this._isBound()?this._boundValue():e},k.prototype._promiseAt=function(t){return this[4*t-4+2]},k.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},k.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},k.prototype._boundValue=function(){},k.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,o=t._receiverAt(0);void 0===o&&(o=l),this._addCallbacks(e,n,r,o,null)},k.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),o=t._promiseAt(e),i=t._receiverAt(e);void 0===i&&(i=l),this._addCallbacks(n,r,o,i,null)},k.prototype._addCallbacks=function(t,e,n,r,o){var i=this._length();if(65531<=i&&(i=0,this._setLength(0)),0===i)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===o?t:d.domainBind(o,t)),"function"==typeof e&&(this._rejectionHandler0=null===o?e:d.domainBind(o,e));else{var s=4*i-4;this[s+2]=n,this[s+3]=r,"function"==typeof t&&(this[s+0]=null===o?t:d.domainBind(o,t)),"function"==typeof e&&(this[s+1]=null===o?e:d.domainBind(o,e))}return this._setLength(i+1),i},k.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},k.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(c(),!1);var n=m(t,this);if(!(n instanceof k))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r!==this){var o=r._bitField;if(0==(50397184&o)){var i=this._length();0<i&&r._migrateCallback0(this);for(var s=1;s<i;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&o))this._fulfill(r._value());else if(0!=(16777216&o))this._reject(r._reason());else{var a=new y("late cancellation observer");r._attachExtraTrace(a),this._reject(a)}}else this._reject(c())}},k.prototype._rejectCallback=function(t,e,n){var r=d.ensureErrorObject(t),o=r===t;if(!o&&!n&&w.warnings()){var i="a promise was rejected with a non-error: "+d.classString(t);this._warn(i,!0)}this._attachExtraTrace(r,!!e&&o),this._reject(t)},k.prototype._resolveFromExecutor=function(t){if(t!==_){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},k.prototype._settlePromiseFromHandler=function(t,e,n,r){var o=r._bitField;if(0==(65536&o)){var i;r._pushContext(),e===h?n&&"number"==typeof n.length?i=j(t).apply(this._boundValue(),n):(i=S).e=new f("cannot .spread() a non-array: "+d.classString(n)):i=j(t).call(e,n);var s=r._popContext();0==(65536&(o=r._bitField))&&(i===b?r._reject(n):i===S?r._rejectCallback(i.e,!1):(w.checkForgottenReturns(i,s,"",r,this),r._resolveCallback(i)))}},k.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},k.prototype._followee=function(){return this._rejectionHandler0},k.prototype._setFollowee=function(t){this._rejectionHandler0=t},k.prototype._settlePromise=function(t,e,n,r){var o=t instanceof k,i=this._bitField,s=0!=(134217728&i);0!=(65536&i)?(o&&t._invokeInternalOnCancel(),n instanceof E&&n.isFinallyHandler()?(n.cancelPromise=t,j(e).call(n,r)===S&&t._reject(S.e)):e===a?t._fulfill(a.call(n)):n instanceof u?n._promiseCancelled(t):o||t instanceof g?t._cancel():n.cancel()):"function"==typeof e?o?(s&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof u?n._isResolved()||(0!=(33554432&i)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):o&&(s&&t._setAsyncGuaranteed(),0!=(33554432&i)?t._fulfill(r):t._reject(r))},k.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"==typeof e?n instanceof k?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof k&&n._reject(o)},k.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},k.prototype._settlePromise0=function(t,e,n){var r=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,o,e)},k.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},k.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=c();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,0<(65535&e)&&(0!=(134217728&e)?this._settlePromises():v.settlePromises(this),this._dereferenceTrace())}},k.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return v.fatalError(t,d.isNode);0<(65535&e)?v.settlePromises(this):this._ensurePossibleRejectionHandled()}},k.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,e)}},k.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,e)}},k.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(0<e){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},k.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},k.defer=k.pending=function(){return w.deprecated("Promise.defer","new Promise"),{promise:new k(_),resolve:x,reject:O}},d.notEnumerableProp(k,"_makeSelfResolutionError",c),P("./method")(k,_,m,s,w),P("./bind")(k,_,m,w),P("./cancel")(k,g,s,w),P("./direct_resolve")(k),P("./synchronous_inspection")(k),P("./join")(k,g,m,_,v,p),(k.Promise=k).version="3.5.2",P("./map.js")(k,g,s,m,_,w),P("./call_get.js")(k),P("./using.js")(k,s,m,o,_,w),P("./timers.js")(k,_,w),P("./generators.js")(k,s,_,m,u,w),P("./nodeify.js")(k),P("./promisify.js")(k,_),P("./props.js")(k,g,m,s),P("./race.js")(k,_,m,s),P("./reduce.js")(k,g,s,m,_,w),P("./settle.js")(k,g,w),P("./some.js")(k,g,s),P("./filter.js")(k,_),P("./each.js")(k,_),P("./any.js")(k),d.toFastProperties(k),d.toFastProperties(k.prototype),T({a:1}),T({b:2}),T({c:3}),T(1),T(function(){}),T(void 0),T(!1),T(new k(_)),w.setBounds(e.firstLineError,d.lastLineError),k}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(r,t,e){"use strict";t.exports=function(a,n,c,s,t){var u=r("./util");u.isArray;function e(t){var e=this._promise=new a(n);t instanceof a&&e._propagateFrom(t,3),e._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return u.inherits(e,t),e.prototype.length=function(){return this._length},e.prototype.promise=function(){return this._promise},e.prototype._init=function t(e,n){var r=c(this._values,this._promise);if(r instanceof a){var o=(r=r._target())._bitField;if(this._values=r,0==(50397184&o))return this._promise._setAsyncGuaranteed(),r._then(t,this._reject,void 0,this,n);if(0==(33554432&o))return 0!=(16777216&o)?this._reject(r._reason()):this._cancel();r=r._value()}if(null!==(r=u.asArray(r)))0!==r.length?this._iterate(r):-5===n?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(n));else{var i=s("expecting an array or an iterable object but got "+u.classString(r)).reason();this._promise._rejectCallback(i,!1)}},e.prototype._iterate=function(t){var e=this.getActualLength(t.length);this._length=e,this._values=this.shouldCopyValues()?new Array(e):this._values;for(var n=this._promise,r=!1,o=null,i=0;i<e;++i){var s=c(t[i],n);o=s instanceof a?(s=s._target())._bitField:null,r?null!==o&&s.suppressUnhandledRejections():null!==o?0==(50397184&o)?(s._proxy(this,i),this._values[i]=s):r=0!=(33554432&o)?this._promiseFulfilled(s._value(),i):0!=(16777216&o)?this._promiseRejected(s._reason(),i):this._promiseCancelled(i):r=this._promiseFulfilled(s,i)}r||n._setAsyncGuaranteed()},e.prototype._isResolved=function(){return null===this._values},e.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},e.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},e.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},e.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},e.prototype._promiseCancelled=function(){return this._cancel(),!0},e.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},e.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof a)t.cancel();else for(var e=0;e<t.length;++e)t[e]instanceof a&&t[e].cancel()}},e.prototype.shouldCopyValues=function(){return!0},e.prototype.getActualLength=function(t){return t},e}},{"./util":36}],24:[function(r,t,e){"use strict";t.exports=function(u,l){var p={},d=r("./util"),f=r("./nodeback"),h=d.withAppended,v=d.maybeWrapAsError,t=d.canEvaluate,y=r("./errors").TypeError,_={__isPromisified__:!0},e=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),b=function(t){return d.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function s(t){return!e.test(t)}function m(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function g(t,e,n,r){for(var o,i,s,a,c=d.inheritedDataKeys(t),u=[],l=0;l<c.length;++l){var f=c[l],h=t[f],p=r===b||b(f,h,t);"function"!=typeof h||m(h)||(o=t,i=f,s=e,void 0,(a=d.getDataPropertyOrDefault(o,i+s,_))&&m(a))||!r(f,h,t,p)||u.push(f,h)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var o=t[r];if(n.test(o))for(var i=o.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===i)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(u,e,n),u}var n,w=function(t){return t.replace(/([$])/,"\\$")};var E=t?n:function(o,i,t,e,n,s){var a=function(){return this}(),c=o;function r(){var t=i;i===p&&(t=this);var e=new u(l);e._captureStackTrace();var n="string"==typeof c&&this!==a?this[c]:o,r=f(e,s);try{n.apply(t,h(arguments,r))}catch(t){e._rejectCallback(v(t),!0,!0)}return e._isFateSealed()||e._setAsyncGuaranteed(),e}return"string"==typeof c&&(o=e),d.notEnumerableProp(r,"__isPromisified__",!0),r};function C(t,e,n,r,o){for(var i=new RegExp(w(e)+"$"),s=g(t,e,i,n),a=0,c=s.length;a<c;a+=2){var u=s[a],l=s[a+1],f=u+e;if(r===E)t[f]=E(u,p,u,l,e,o);else{var h=r(l,function(){return E(u,p,u,l,e,o)});d.notEnumerableProp(h,"__isPromisified__",!0),t[f]=h}}return d.toFastProperties(t),t}u.promisify=function(t,e){if("function"!=typeof t)throw new y("expecting a function but got "+d.classString(t));if(m(t))return t;var n,r=void 0===(e=Object(e)).context?p:e.context,o=!!e.multiArgs,i=E(n=t,r,void 0,n,null,o);return d.copyDescriptors(t,i,s),i},u.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,r=e.suffix;"string"!=typeof r&&(r="Async");var o=e.filter;"function"!=typeof o&&(o=b);var i=e.promisifier;if("function"!=typeof i&&(i=E),!d.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=d.inheritedDataKeys(t),a=0;a<s.length;++a){var c=t[s[a]];"constructor"!==s[a]&&d.isClass(c)&&(C(c.prototype,r,o,i,n),C(c,r,o,i,n))}return C(t,r,o,i,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(f,t,e){"use strict";t.exports=function(r,t,o,i){var a,e=f("./util"),s=e.isObject,c=f("./es5");"function"==typeof Map&&(a=Map);var u=function(){var n=0,r=0;function o(t,e){this[n]=t,this[n+r]=e,n++}return function(t){r=t.size,n=0;var e=new Array(2*t.size);return t.forEach(o,e),e}}();function l(t){var e,n=!1;if(void 0!==a&&t instanceof a)e=u(t),n=!0;else{var r=c.keys(t),o=r.length;e=new Array(2*o);for(var i=0;i<o;++i){var s=r[i];e[i]=t[s],e[i+o]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function n(t){var e,n=o(t);return s(n)?(e=n instanceof r?n._then(r.props,void 0,void 0,void 0,void 0):new l(n).promise(),n instanceof r&&e._propagateFrom(n,2),e):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}e.inherits(l,t),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new a,n=t.length/2|0,r=0;r<n;++r){var o=t[n+r],i=t[r];e.set(o,i)}return e}(this._values);else{n={};for(var r=this.length(),o=0,i=this.length();o<i;++o)n[this._values[o+r]]=this._values[o]}return this._resolve(n),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(t){return t>>1},r.prototype.props=function(){return n(this)},r.props=function(t){return n(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var o=this._front+r-3;this._checkCapacity(r);var i=this._capacity-1;this[o+0&i]=t,this[o+1&i]=e,this[o+2&i]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,r,o){for(var i=0;i<o;++i)n[i+r]=t[i+e],t[i+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=r},{}],27:[function(t,e,n){"use strict";e.exports=function(u,l,f,h){var p=t("./util"),d=function(e){return e.then(function(t){return n(t,e)})};function n(t,e){var n=f(t);if(n instanceof u)return d(n);if(null===(t=p.asArray(t)))return h("expecting an array or an iterable object but got "+p.classString(t));var r=new u(l);void 0!==e&&r._propagateFrom(e,3);for(var o=r._fulfill,i=r._reject,s=0,a=t.length;s<a;++s){var c=t[s];(void 0!==c||s in t)&&u.cast(c)._then(o,i,void 0,r,null)}return r}u.race=function(t){return n(t,void 0)},u.prototype.race=function(){return n(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(s,t,o,n,i,a){var c=s._getDomain,u=e("./util"),l=u.tryCatch;function f(t,e,n,r){this.constructor$(t);var o=c();this._fn=null===o?e:u.domainBind(o,e),void 0!==n&&(n=s.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=r===i?Array(this._length):0===r?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function h(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function p(t,e,n,r){return"function"!=typeof e?o("expecting a function but got "+u.classString(e)):new f(t,e,n,r).promise()}function d(t){this.accum=t,this.array._gotAccum(t);var e=n(this.value,this.array._promise);return e instanceof s?(this.array._currentCancellable=e)._then(r,void 0,void 0,this,void 0):r.call(this,e)}function r(t){var e,n=this.array,r=n._promise,o=l(n._fn);r._pushContext(),(e=void 0!==n._eachValues?o.call(r._boundValue(),t,this.index,this.length):o.call(r._boundValue(),this.accum,t,this.index,this.length))instanceof s&&(n._currentCancellable=e);var i=r._popContext();return a.checkForgottenReturns(e,i,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),e}u.inherits(f,t),f.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==i&&this._eachValues.push(t)},f.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},f.prototype._init=function(){},f.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},f.prototype.shouldCopyValues=function(){return!1},f.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},f.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof s&&this._currentCancellable.cancel(),this._initialValue instanceof s&&this._initialValue.cancel())},f.prototype._iterate=function(t){var e,n,r=(this._values=t).length;if(n=void 0!==this._initialValue?(e=this._initialValue,0):(e=s.resolve(t[0]),1),!(this._currentCancellable=e).isRejected())for(;n<r;++n){var o={accum:null,value:t[n],index:n,length:r,array:this};e=e._then(d,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(e=e._then(this._eachComplete,void 0,void 0,this,void 0)),e._then(h,h,void 0,e,this)},s.prototype.reduce=function(t,e){return p(this,t,e,null)},s.reduce=function(t,e,n,r){return p(t,e,n,r)}}},{"./util":36}],29:[function(t,e,n){"use strict";var r,o=t("./util"),i=o.getNativePromise();if(o.isNode&&"undefined"==typeof MutationObserver){var s=H.setImmediate,a=Z.nextTick;r=o.isRecentNode?function(t){s.call(H,t)}:function(t){a.call(Z,t)}}else if("function"==typeof i&&"function"==typeof i.resolve){var c=i.resolve();r=function(t){c.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==u?function(t){u(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var n=document.createElement("div"),r={attributes:!0},o=!1,i=document.createElement("div");new MutationObserver(function(){n.classList.toggle("foo"),o=!1}).observe(i,r);return function(t){var e=new MutationObserver(function(){e.disconnect(),t()});e.observe(n,r),o||(o=!0,i.classList.toggle("foo"))}}();e.exports=r},{"./util":36}],30:[function(i,t,e){"use strict";t.exports=function(t,e,n){var r=t.PromiseInspection;function o(t){this.constructor$(t)}i("./util").inherits(o,e),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var n=new r;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},o.prototype._promiseRejected=function(t,e){var n=new r;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},t.settle=function(t){return n.deprecated(".settle()",".reflect()"),new o(t).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(l,t,e){"use strict";t.exports=function(t,e,o){var n=l("./util"),r=l("./errors").RangeError,i=l("./errors").AggregateError,s=n.isArray,a={};function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return o("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(t),r=n.promise();return n.setHowMany(e),n.init(),r}n.inherits(c,e),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(a),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new i,e=this.length();e<this._values.length;++e)this._values[e]!==a&&t.push(this._values[e]);return 0<t.length?this._reject(t):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new r(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return u(t,e)},t.prototype.some=function(t){return u(this,t)},t._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){this._settledValueField=void 0!==t?(t=t._target(),this._bitField=t._bitField,t._isFateSealed()?t._settledValue():void 0):void(this._bitField=0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},i=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return i.call(this._target())},t.prototype.isFulfilled=function(){return o.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(a,c){var u=t("./util"),l=u.errorObj,o=u.isObject;var i={}.hasOwnProperty;return function(t,e){if(o(t)){if(t instanceof a)return t;var n=function(t){try{return t.then}catch(t){return l.e=t,l}}(t);if(n===l){e&&e._pushContext();var r=a.reject(n.e);return e&&e._popContext(),r}if("function"==typeof n)return function(t){try{return i.call(t,"_promise0")}catch(t){return!1}}(t)?(r=new a(c),t._then(r._fulfill,r._reject,void 0,r,null),r):function(t,e,n){var r=new a(c),o=r;n&&n._pushContext(),r._captureStackTrace(),n&&n._popContext();var i=!0,s=u.tryCatch(e).call(t,function(t){r&&(r._resolveCallback(t),r=null)},function(t){r&&(r._rejectCallback(t,i,!0),r=null)});return i=!1,r&&s===l&&(r._rejectCallback(s.e,!0,!0),r=null),o}(t,n,e)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(o,i,a){var c=t("./util"),u=o.TimeoutError;function l(t){this.handle=t}l.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(t){return e(+this).thenReturn(t)},e=o.delay=function(t,e){var n,r;return void 0!==e?(n=o.resolve(e)._then(s,null,null,t,void 0),a.cancellation()&&e instanceof o&&n._setOnCancel(e)):(n=new o(i),r=setTimeout(function(){n._fulfill()},+t),a.cancellation()&&n._setOnCancel(new l(r)),n._captureStackTrace()),n._setAsyncGuaranteed(),n};o.prototype.delay=function(t){return e(t,this)};function n(t){return clearTimeout(this.handle),t}function r(t){throw clearTimeout(this.handle),t}o.prototype.timeout=function(t,o){var i,s;t=+t;var e=new l(setTimeout(function(){var t,e,n,r;i.isPending()&&(t=i,n=s,r="string"!=typeof(e=o)?e instanceof Error?e:new u("operation timed out"):new u(e),c.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel())},t));return a.cancellation()?(s=this.then(),(i=s._then(n,r,void 0,e,void 0))._setOnCancel(e)):i=this._then(n,r,void 0,e,void 0),i}}},{"./util":36}],35:[function(s,t,e){"use strict";t.exports=function(h,p,d,e,t,v){var y=s("./util"),n=s("./errors").TypeError,r=s("./util").inherits,_=y.errorObj,b=y.tryCatch,o={};function u(t){setTimeout(function(){throw t},0)}function m(o,i){var s=0,a=o.length,c=new h(t);return function t(){if(a<=s)return c._fulfill();var e,n,r=(e=o[s++],(n=d(e))!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&n._setDisposable(e._getDisposer()),n);if(r instanceof h&&r._isDisposable()){try{r=d(r._getDisposer().tryDispose(i),o.promise)}catch(t){return u(t)}if(r instanceof h)return r._then(t,u,null,null,null)}t()}(),c}function g(t,e,n){this._data=t,this._promise=e,this._context=n}function i(t,e,n){this.constructor$(t,e,n)}function w(t){return g.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function E(t){this.length=t,this.promise=null,this[t-1]=null}g.prototype.data=function(){return this._data},g.prototype.promise=function(){return this._promise},g.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():o},g.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==o?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},g.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},r(i,g),i.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},E.prototype._resultCancelled=function(){for(var t=this.length,e=0;e<t;++e){var n=this[e];n instanceof h&&n.cancel()}},h.using=function(){var t=arguments.length;if(t<2)return p("you must pass at least 2 arguments to Promise.using");var e,i=arguments[t-1];if("function"!=typeof i)return p("expecting a function but got "+y.classString(i));var s=!0;2===t&&Array.isArray(arguments[0])?(t=(e=arguments[0]).length,s=!1):(e=arguments,t--);for(var n=new E(t),r=0;r<t;++r){var o=e[r];if(g.isDisposer(o)){var a=o;(o=o.promise())._setDisposable(a)}else{var c=d(o);c instanceof h&&(o=c._then(w,null,null,{resources:n,index:r},void 0))}n[r]=o}var u=new Array(n.length);for(r=0;r<u.length;++r)u[r]=h.resolve(n[r]).reflect();var l=h.all(u).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return _.e=n.error(),_;if(!n.isFulfilled())return void l.cancel();t[e]=n.value()}f._pushContext(),i=b(i);var r=s?i.apply(void 0,t):i(t),o=f._popContext();return v.checkForgottenReturns(r,o,"Promise.using",f),r}),f=l.lastly(function(){var t=new h.PromiseInspection(l);return m(n,t)});return(n.promise=f)._setOnCancel(n),f},h.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},h.prototype._isDisposable=function(){return 0<(131072&this._bitField)},h.prototype._getDisposer=function(){return this._disposer},h.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},h.prototype.disposer=function(t){if("function"==typeof t)return new i(t,this,e());throw new n}}},{"./errors":12,"./util":36}],36:[function(t,e,n){"use strict";var u=t("./es5"),r="undefined"==typeof navigator,o={e:{}},i,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==H?H:void 0!==this?this:null;function a(){try{var t=i;return i=null,t.apply(this,arguments)}catch(t){return o.e=t,o}}function c(t){return i=t,a}var l=function(e,n){var r={}.hasOwnProperty;function t(){for(var t in this.constructor=e,(this.constructor$=n).prototype)r.call(n.prototype,t)&&"$"!==t.charAt(t.length-1)&&(this[t+"$"]=n.prototype[t])}return t.prototype=n.prototype,e.prototype=new t,e.prototype};function f(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function h(t){return"function"==typeof t||"object"==typeof t&&null!==t}function p(t){return f(t)?new Error(j(t)):t}function d(t,e){var n,r=t.length,o=new Array(r+1);for(n=0;n<r;++n)o[n]=t[n];return o[n]=e,o}function v(t,e,n){if(!u.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function y(t,e,n){if(f(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return u.defineProperty(t,e,r),t}function _(t){throw t}var b=function(){var o=[Array.prototype,Object.prototype,Function.prototype],a=function(t){for(var e=0;e<o.length;++e)if(o[e]===t)return!0;return!1};if(u.isES5){var c=Object.getOwnPropertyNames;return function(t){for(var e=[],n=Object.create(null);null!=t&&!a(t);){var r;try{r=c(t)}catch(t){return e}for(var o=0;o<r.length;++o){var i=r[o];if(!n[i]){n[i]=!0;var s=Object.getOwnPropertyDescriptor(t,i);null!=s&&null==s.get&&null==s.set&&e.push(i)}}t=u.getPrototypeOf(t)}return e}}var i={}.hasOwnProperty;return function(t){if(a(t))return[];var e=[];t:for(var n in t)if(i.call(t,n))e.push(n);else{for(var r=0;r<o.length;++r)if(i.call(o[r],n))continue t;e.push(n)}return e}}(),m=/this\s*\.\s*\S+\s*=/;function g(t){try{if("function"==typeof t){var e=u.names(t.prototype),n=u.isES5&&1<e.length,r=0<e.length&&!(1===e.length&&"constructor"===e[0]),o=m.test(t+"")&&0<u.names(t).length;if(n||r||o)return!0}return!1}catch(t){return!1}}function w(t){function e(){}e.prototype=t;var n=new e;function r(){return typeof n.foo}return r(),r(),t}var E=/^[a-z$_][a-z$_0-9]*$/i;function C(t){return E.test(t)}function S(t,e,n){for(var r=new Array(t),o=0;o<t;++o)r[o]=e+o+n;return r}function j(t){try{return t+""}catch(t){return"[no string representation]"}}function k(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function x(t){try{y(t,"isOperational",!0)}catch(t){}}function O(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function T(t){return k(t)&&u.propertyIsWritable(t,"stack")}var P="stack"in new Error?function(t){return T(t)?t:new Error(j(t))}:function(t){if(T(t))return t;try{throw new Error(j(t))}catch(t){return t}};function A(t){return{}.toString.call(t)}function F(t,e,n){for(var r=u.names(t),o=0;o<r.length;++o){var i=r[o];if(n(i))try{u.defineProperty(e,i,u.getDescriptor(t,i))}catch(t){}}}var R=function(t){return u.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var I="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};R=function(t){return u.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?I(t):null}}var D=void 0!==Z&&"[object process]"===A(Z).toLowerCase(),M=void 0!==Z&&void 0!==Z.env;function N(t){return M?Z.env[t]:void 0}function L(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function U(t,e){return t.bind(e)}var V={isClass:g,isIdentifier:C,inheritedDataKeys:b,getDataPropertyOrDefault:v,thrower:_,isArray:u.isArray,asArray:R,notEnumerableProp:y,isPrimitive:f,isObject:h,isError:k,canEvaluate:r,errorObj:o,tryCatch:c,inherits:l,withAppended:d,maybeWrapAsError:p,toFastProperties:w,filledRange:S,toString:j,canAttachTrace:T,ensureErrorObject:P,originatesFromRejection:O,markAsOriginatingFromRejection:x,classString:A,copyDescriptors:F,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:D,hasEnvVariables:M,env:N,global:s,getNativePromise:L,domainBind:U},q;V.isRecentNode=V.isNode&&(q=Z.versions.node.split(".").map(Number),0===q[0]&&10<q[1]||0<q[0]),V.isNode&&V.toFastProperties(Z);try{throw new Error}catch(t){V.lastLineError=t}e.exports=V},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:4,timers:42}],2:[function(f,e,n){(function(r){!function(t){if("object"==typeof n&&void 0!==e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this).localforage=t()}}(function(){return function i(s,a,c){function u(n,t){if(!a[n]){if(!s[n]){var e="function"==typeof f&&f;if(!t&&e)return e(n,!0);if(l)return l(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[n]={exports:{}};s[n][0].call(o.exports,function(t){var e=s[n][1][t];return u(e||t)},o,o.exports,i,s,a,c)}return a[n].exports}for(var l="function"==typeof f&&f,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,l,e){(function(e){"use strict";var n,r,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var o=0,i=new t(u),s=e.document.createTextNode("");i.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var a=new e.MessageChannel;a.port1.onmessage=u,n=function(){a.port2.postMessage(0)}}var c=[];function u(){var t,e;r=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}r=!1}l.exports=function(t){1!==c.push(t)||r||n()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var o=t(1);function u(){}var l={},i=["REJECTED"],s=["FULFILLED"],r=["PENDING"];function a(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,t!==u&&p(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,n,r){o(function(){var t;try{t=n(r)}catch(t){return l.reject(e,t)}t===e?l.reject(e,new TypeError("Cannot resolve promise with itself")):l.resolve(e,t)})}function h(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,l.reject(e,t))}function o(t){n||(n=!0,l.resolve(e,t))}var i=d(function(){t(o,r)});"error"===i.status&&r(i.value)}function d(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=a).prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===i)return this;var n=new this.constructor(u);this.state!==r?f(n,this.state===s?t:e,this.outcome):this.queue.push(new c(n,t,e));return n},c.prototype.callFulfilled=function(t){l.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){l.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},l.resolve=function(t,e){var n=d(h,e);if("error"===n.status)return l.reject(t,n.value);var r=n.value;if(r)p(t,r);else{t.state=s,t.outcome=e;for(var o=-1,i=t.queue.length;++o<i;)t.queue[o].callFulfilled(e)}return t},l.reject=function(t,e){t.state=i,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},a.resolve=function(t){if(t instanceof this)return t;return l.resolve(new this(u),t)},a.reject=function(t){var e=new this(u);return l.reject(e,t)},a.all=function(t){var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,o=!1;if(!r)return this.resolve([]);var i=new Array(r),s=0,e=-1,a=new this(u);for(;++e<r;)c(t[e],e);return a;function c(t,e){n.resolve(t).then(function(t){i[e]=t,++s!==r||o||(o=!0,l.resolve(a,i))},function(t){o||(o=!0,l.reject(a,t))})}},a.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);var o=-1,i=new this(u);for(;++o<n;)s=t[o],e.resolve(s).then(function(t){r||(r=!0,l.resolve(i,t))},function(t){r||(r=!0,l.reject(i,t))});var s;return i}},{1:1}],3:[function(e,t,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var a=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function s(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(t){if("TypeError"!==t.name)throw t;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<e.length;o+=1)r.append(e[o]);return r.getBlob(n.type)}}"undefined"==typeof Promise&&t(3);var f=Promise;function h(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function c(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function p(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function i(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var u="local-forage-detect-blob-support",o=void 0,l={},d=Object.prototype.toString,v="readonly",y="readwrite";function _(t){return"boolean"==typeof o?f.resolve(o):(r=t,new f(function(n){var t=r.transaction(u,y),e=s([""]);t.objectStore(u).put(e,"key"),t.onabort=function(t){t.preventDefault(),t.stopPropagation(),n(!1)},t.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),e=navigator.userAgent.match(/Edge\//);n(e||!t||43<=parseInt(t[1],10))}}).catch(function(){return!1})).then(function(t){return o=t});var r}function b(t){var e=l[t.name],n={};n.promise=new f(function(t,e){n.resolve=t,n.reject=e}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function m(t){var e=l[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function g(t,e){var n=l[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function w(o,i){return new f(function(t,e){if(l[o.name]=l[o.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},o.db){if(!i)return t(o.db);b(o),o.db.close()}var n=[o.name];i&&n.push(o.version);var r=a.open.apply(a,n);i&&(r.onupgradeneeded=function(e){var t=r.result;try{t.createObjectStore(o.storeName),e.oldVersion<=1&&t.createObjectStore(u)}catch(t){if("ConstraintError"!==t.name)throw t;console.warn('The database "'+o.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+o.storeName+'" already exists.')}}),r.onerror=function(t){t.preventDefault(),e(r.error)},r.onsuccess=function(){t(r.result),m(o)}})}function E(t){return w(t,!1)}function C(t){return w(t,!0)}function S(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,o=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||n){if(n){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function j(t){return s([function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),o=0;o<e;o++)r[o]=t.charCodeAt(o);return n}(atob(t.data))],{type:t.type})}function k(t){return t&&t.__local_forage_encoded_blob}function x(t){var e=this,n=e._initReady().then(function(){var t=l[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return c(n,t,t),n}function O(e,n,r,o){void 0===o&&(o=1);try{var t=e.db.transaction(e.storeName,n);r(null,t)}catch(t){if(0<o&&(!e.db||"InvalidStateError"===t.name||"NotFoundError"===t.name))return f.resolve().then(function(){if(!e.db||"NotFoundError"===t.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),C(e)}).then(function(){return function(n){b(n);for(var r=l[n.name],o=r.forages,t=0;t<o.length;t++){var e=o[t];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return n.db=null,E(n).then(function(t){return n.db=t,S(n)?C(n):t}).then(function(t){n.db=r.db=t;for(var e=0;e<o.length;e++)o[e]._dbInfo.db=t}).catch(function(t){throw g(n,t),t})}(e).then(function(){O(e,n,r,o-1)})}).catch(r);r(t)}}var T={_driver:"asyncStorage",_initStorage:function(t){var r=this,o={db:null};if(t)for(var e in t)o[e]=t[e];var i=l[o.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},l[o.name]=i),i.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=x);var n=[];function s(){return f.resolve()}for(var a=0;a<i.forages.length;a++){var c=i.forages[a];c!==r&&n.push(c._initReady().catch(s))}var u=i.forages.slice(0);return f.all(n).then(function(){return o.db=i.db,E(o)}).then(function(t){return o.db=t,S(o,r._defaultConfig.version)?C(o):t}).then(function(t){o.db=i.db=t,r._dbInfo=o;for(var e=0;e<u.length;e++){var n=u[e];n!==r&&(n._dbInfo.db=o.db,n._dbInfo.version=o.version)}})},_support:function(){try{if(!a)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(s,t){var a=this,e=new f(function(i,n){a.ready().then(function(){O(a._dbInfo,v,function(t,e){if(t)return n(t);try{var r=e.objectStore(a._dbInfo.storeName).openCursor(),o=1;r.onsuccess=function(){var t=r.result;if(t){var e=t.value;k(e)&&(e=j(e));var n=s(e,t.key,o++);void 0!==n?i(n):t.continue()}else i()},r.onerror=function(){n(r.error)}}catch(t){n(t)}})}).catch(n)});return h(e,t),e},getItem:function(i,t){var s=this;i=p(i);var e=new f(function(r,o){s.ready().then(function(){O(s._dbInfo,v,function(t,e){if(t)return o(t);try{var n=e.objectStore(s._dbInfo.storeName).get(i);n.onsuccess=function(){var t=n.result;void 0===t&&(t=null),k(t)&&(t=j(t)),r(t)},n.onerror=function(){o(n.error)}}catch(t){o(t)}})}).catch(o)});return h(e,t),e},setItem:function(a,e,t){var c=this;a=p(a);var n=new f(function(i,s){var t;c.ready().then(function(){return t=c._dbInfo,"[object Blob]"===d.call(e)?_(t.db).then(function(t){return t?e:(r=e,new f(function(n,t){var e=new FileReader;e.onerror=t,e.onloadend=function(t){var e=btoa(t.target.result||"");n({__local_forage_encoded_blob:!0,data:e,type:r.type})},e.readAsBinaryString(r)}));var r}):e}).then(function(o){O(c._dbInfo,y,function(t,e){if(t)return s(t);try{var n=e.objectStore(c._dbInfo.storeName);null===o&&(o=void 0);var r=n.put(o,a);e.oncomplete=function(){void 0===o&&(o=null),i(o)},e.onabort=e.onerror=function(){var t=r.error?r.error:r.transaction.error;s(t)}}catch(t){s(t)}})}).catch(s)});return h(n,t),n},removeItem:function(i,t){var s=this;i=p(i);var e=new f(function(r,o){s.ready().then(function(){O(s._dbInfo,y,function(t,e){if(t)return o(t);try{var n=e.objectStore(s._dbInfo.storeName).delete(i);e.oncomplete=function(){r()},e.onerror=function(){o(n.error)},e.onabort=function(){var t=n.error?n.error:n.transaction.error;o(t)}}catch(t){o(t)}})}).catch(o)});return h(e,t),e},clear:function(t){var i=this,e=new f(function(r,o){i.ready().then(function(){O(i._dbInfo,y,function(t,e){if(t)return o(t);try{var n=e.objectStore(i._dbInfo.storeName).clear();e.oncomplete=function(){r()},e.onabort=e.onerror=function(){var t=n.error?n.error:n.transaction.error;o(t)}}catch(t){o(t)}})}).catch(o)});return h(e,t),e},length:function(t){var i=this,e=new f(function(r,o){i.ready().then(function(){O(i._dbInfo,v,function(t,e){if(t)return o(t);try{var n=e.objectStore(i._dbInfo.storeName).count();n.onsuccess=function(){r(n.result)},n.onerror=function(){o(n.error)}}catch(t){o(t)}})}).catch(o)});return h(e,t),e},key:function(a,t){var c=this,e=new f(function(i,s){a<0?i(null):c.ready().then(function(){O(c._dbInfo,v,function(t,e){if(t)return s(t);try{var n=e.objectStore(c._dbInfo.storeName),r=!1,o=n.openCursor();o.onsuccess=function(){var t=o.result;t?0===a?i(t.key):r?i(t.key):(r=!0,t.advance(a)):i(null)},o.onerror=function(){s(o.error)}}catch(t){s(t)}})}).catch(s)});return h(e,t),e},keys:function(t){var s=this,e=new f(function(o,i){s.ready().then(function(){O(s._dbInfo,v,function(t,e){if(t)return i(t);try{var n=e.objectStore(s._dbInfo.storeName).openCursor(),r=[];n.onsuccess=function(){var t=n.result;t?(r.push(t.key),t.continue()):o(r)},n.onerror=function(){i(n.error)}}catch(t){i(t)}})}).catch(i)});return h(e,t),e},dropInstance:function(s,t){t=i.apply(this,arguments);var e,n=this.config();if((s="function"!=typeof s&&s||{}).name||(s.name=s.name||n.name,s.storeName=s.storeName||n.storeName),s.name){var r=s.name===n.name&&this._dbInfo.db?f.resolve(this._dbInfo.db):E(s).then(function(t){var e=l[s.name],n=e.forages;e.db=t;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=t;return t});e=s.storeName?r.then(function(t){if(t.objectStoreNames.contains(s.storeName)){var o=t.version+1;b(s);var r=l[s.name],i=r.forages;t.close();for(var e=0;e<i.length;e++){var n=i[e];n._dbInfo.db=null,n._dbInfo.version=o}return new f(function(e,n){var r=a.open(s.name,o);r.onerror=function(t){r.result.close(),n(t)},r.onupgradeneeded=function(){r.result.deleteObjectStore(s.storeName)},r.onsuccess=function(){var t=r.result;t.close(),e(t)}}).then(function(t){r.db=t;for(var e=0;e<i.length;e++){var n=i[e];n._dbInfo.db=t,m(n._dbInfo)}}).catch(function(t){throw(g(s,t)||f.resolve()).catch(function(){}),t})}}):r.then(function(t){b(s);var n=l[s.name],r=n.forages;t.close();for(var e=0;e<r.length;e++)r[e]._dbInfo.db=null;return new f(function(e,n){var r=a.deleteDatabase(s.name);r.onerror=r.onblocked=function(t){var e=r.result;e&&e.close(),n(t)},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}}).then(function(t){n.db=t;for(var e=0;e<r.length;e++)m(r[e]._dbInfo)}).catch(function(t){throw(g(s,t)||f.resolve()).catch(function(){}),t})})}else e=f.reject("Invalid arguments");return h(e,t),e}};var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=/^~~local_forage_type~([^~]+)~/,F="__lfsc__:",R=F.length,I="arbf",D="blob",M=R+I.length,N=Object.prototype.toString;function L(t){var e,n,r,o,i,s=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),l=new Uint8Array(u);for(e=0;e<a;e+=4)n=P.indexOf(t[e]),r=P.indexOf(t[e+1]),o=P.indexOf(t[e+2]),i=P.indexOf(t[e+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u}function U(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=P[n[e]>>2],r+=P[(3&n[e])<<4|n[e+1]>>4],r+=P[(15&n[e+1])<<2|n[e+2]>>6],r+=P[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var V={serialize:function(e,n){var t="";if(e&&(t=N.call(e)),e&&("[object ArrayBuffer]"===t||e.buffer&&"[object ArrayBuffer]"===N.call(e.buffer))){var r,o=F;e instanceof ArrayBuffer?(r=e,o+=I):(r=e.buffer,"[object Int8Array]"===t?o+="si08":"[object Uint8Array]"===t?o+="ui08":"[object Uint8ClampedArray]"===t?o+="uic8":"[object Int16Array]"===t?o+="si16":"[object Uint16Array]"===t?o+="ur16":"[object Int32Array]"===t?o+="si32":"[object Uint32Array]"===t?o+="ui32":"[object Float32Array]"===t?o+="fl32":"[object Float64Array]"===t?o+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(o+U(r))}else if("[object Blob]"===t){var i=new FileReader;i.onload=function(){var t="~~local_forage_type~"+e.type+"~"+U(this.result);n(F+D+t)},i.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(t){console.error("Couldn't convert value into a JSON string: ",e),n(null,t)}},deserialize:function(t){if(t.substring(0,R)!==F)return JSON.parse(t);var e,n=t.substring(M),r=t.substring(R,M);if(r===D&&A.test(n)){var o=n.match(A);e=o[1],n=n.substring(o[0].length)}var i=L(n);switch(r){case I:return i;case D:return s([i],{type:e});case"si08":return new Int8Array(i);case"ui08":return new Uint8Array(i);case"uic8":return new Uint8ClampedArray(i);case"si16":return new Int16Array(i);case"ur16":return new Uint16Array(i);case"si32":return new Int32Array(i);case"ui32":return new Uint32Array(i);case"fl32":return new Float32Array(i);case"fl64":return new Float64Array(i);default:throw new Error("Unkown type: "+r)}},stringToBuffer:L,bufferToString:U};function q(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function H(t,r,o,i,s,a){t.executeSql(o,i,s,function(t,n){n.code===n.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(t,e){e.rows.length?a(t,n):q(t,r,function(){t.executeSql(o,i,s,a)},a)},a):a(t,n)},a)}var B={_driver:"webSQLStorage",_initStorage:function(t){var r=this,o={db:null};if(t)for(var e in t)o[e]="string"!=typeof t[e]?t[e].toString():t[e];var n=new f(function(e,n){try{o.db=openDatabase(o.name,String(o.version),o.description,o.size)}catch(t){return n(t)}o.db.transaction(function(t){q(t,o,function(){r._dbInfo=o,e()},function(t,e){n(e)})},n)});return o.serializer=V,n},_support:"function"==typeof openDatabase,iterate:function(u,t){var e=this,n=new f(function(c,n){e.ready().then(function(){var a=e._dbInfo;a.db.transaction(function(t){H(t,a,"SELECT * FROM "+a.storeName,[],function(t,e){for(var n=e.rows,r=n.length,o=0;o<r;o++){var i=n.item(o),s=i.value;if(s&&(s=a.serializer.deserialize(s)),void 0!==(s=u(s,i.key,o+1)))return void c(s)}c()},function(t,e){n(e)})})}).catch(n)});return h(n,t),n},getItem:function(e,t){var i=this;e=p(e);var n=new f(function(o,n){i.ready().then(function(){var r=i._dbInfo;r.db.transaction(function(t){H(t,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],function(t,e){var n=e.rows.length?e.rows.item(0).value:null;n&&(n=r.serializer.deserialize(n)),o(n)},function(t,e){n(e)})})}).catch(n)});return h(n,t),n},setItem:function(t,e,n){return function s(a,t,c,u){var l=this;a=p(a);var e=new f(function(o,i){l.ready().then(function(){void 0===t&&(t=null);var n=t,r=l._dbInfo;r.serializer.serialize(t,function(e,t){t?i(t):r.db.transaction(function(t){H(t,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[a,e],function(){o(n)},function(t,e){i(e)})},function(t){if(t.code===t.QUOTA_ERR){if(0<u)return void o(s.apply(l,[a,n,c,u-1]));i(t)}})})}).catch(i)});return h(e,c),e}.apply(this,[t,e,n,1])},removeItem:function(o,t){var i=this;o=p(o);var e=new f(function(n,r){i.ready().then(function(){var e=i._dbInfo;e.db.transaction(function(t){H(t,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[o],function(){n()},function(t,e){r(e)})})}).catch(r)});return h(e,t),e},clear:function(t){var o=this,e=new f(function(n,r){o.ready().then(function(){var e=o._dbInfo;e.db.transaction(function(t){H(t,e,"DELETE FROM "+e.storeName,[],function(){n()},function(t,e){r(e)})})}).catch(r)});return h(e,t),e},length:function(t){var o=this,e=new f(function(r,n){o.ready().then(function(){var e=o._dbInfo;e.db.transaction(function(t){H(t,e,"SELECT COUNT(key) as c FROM "+e.storeName,[],function(t,e){var n=e.rows.item(0).c;r(n)},function(t,e){n(e)})})}).catch(n)});return h(e,t),e},key:function(o,t){var i=this,e=new f(function(r,n){i.ready().then(function(){var e=i._dbInfo;e.db.transaction(function(t){H(t,e,"SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[o+1],function(t,e){var n=e.rows.length?e.rows.item(0).key:null;r(n)},function(t,e){n(e)})})}).catch(n)});return h(e,t),e},keys:function(t){var r=this,e=new f(function(o,n){r.ready().then(function(){var e=r._dbInfo;e.db.transaction(function(t){H(t,e,"SELECT key FROM "+e.storeName,[],function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r).key);o(n)},function(t,e){n(e)})})}).catch(n)});return h(e,t),e},dropInstance:function(n,t){t=i.apply(this,arguments);var r=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName);var e,o=this;return h(e=n.name?new f(function(t){var e,i;e=n.name===r.name?o._dbInfo.db:openDatabase(n.name,"","",0),n.storeName?t({db:e,storeNames:[n.storeName]}):t((i=e,new f(function(o,n){i.transaction(function(t){t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r).name);o({db:i,storeNames:n})},function(t,e){n(e)})},function(t){n(t)})})))}).then(function(a){return new f(function(i,s){a.db.transaction(function(r){function t(e){return new f(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(t,e){n(e)})})}for(var e=[],n=0,o=a.storeNames.length;n<o;n++)e.push(t(a.storeNames[n]));f.all(e).then(function(){i()}).catch(function(t){s(t)})},function(t){s(t)})})}):f.reject("Invalid arguments"),t),e}};function G(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function W(){return!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}()||0<localStorage.length}var Q={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=G(t,this._defaultConfig),W()?((this._dbInfo=e).serializer=V,f.resolve()):f.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(c,t){var u=this,e=u.ready().then(function(){for(var t=u._dbInfo,e=t.keyPrefix,n=e.length,r=localStorage.length,o=1,i=0;i<r;i++){var s=localStorage.key(i);if(0===s.indexOf(e)){var a=localStorage.getItem(s);if(a&&(a=t.serializer.deserialize(a)),void 0!==(a=c(a,s.substring(n),o++)))return a}}});return h(e,t),e},getItem:function(n,t){var r=this;n=p(n);var e=r.ready().then(function(){var t=r._dbInfo,e=localStorage.getItem(t.keyPrefix+n);return e&&(e=t.serializer.deserialize(e)),e});return h(e,t),e},setItem:function(s,t,e){var a=this;s=p(s);var n=a.ready().then(function(){void 0===t&&(t=null);var i=t;return new f(function(n,r){var o=a._dbInfo;o.serializer.serialize(t,function(t,e){if(e)r(e);else try{localStorage.setItem(o.keyPrefix+s,t),n(i)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||r(t),r(t)}})})});return h(n,e),n},removeItem:function(e,t){var n=this;e=p(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return h(r,t),r},clear:function(t){var r=this,e=r.ready().then(function(){for(var t=r._dbInfo.keyPrefix,e=localStorage.length-1;0<=e;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}});return h(e,t),e},length:function(t){var e=this.keys().then(function(t){return t.length});return h(e,t),e},key:function(n,t){var r=this,e=r.ready().then(function(){var e,t=r._dbInfo;try{e=localStorage.key(n)}catch(t){e=null}return e&&(e=e.substring(t.keyPrefix.length)),e});return h(e,t),e},keys:function(t){var i=this,e=i.ready().then(function(){for(var t=i._dbInfo,e=localStorage.length,n=[],r=0;r<e;r++){var o=localStorage.key(r);0===o.indexOf(t.keyPrefix)&&n.push(o.substring(t.keyPrefix.length))}return n});return h(e,t),e},dropInstance:function(e,t){if(t=i.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return h(r=e.name?new f(function(t){e.storeName?t(G(e,o._defaultConfig)):t(e.name+"/")}).then(function(t){for(var e=localStorage.length-1;0<=e;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}}):f.reject("Invalid arguments"),t),r}},z=function(t,e){for(var n,r,o=t.length,i=0;i<o;){if((n=t[i])===(r=e)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;i++}return!1},$=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},X={},Y={},K={INDEXEDDB:T,WEBSQL:B,LOCALSTORAGE:Q},J=[K.INDEXEDDB._driver,K.WEBSQL._driver,K.LOCALSTORAGE._driver],Z=["dropInstance"],tt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Z),et={description:"",driver:J.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function nt(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function rt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&($(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var ot=new(function(){function o(t){for(var e in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),K)if(K.hasOwnProperty(e)){var n=K[e],r=n._driver;this[e]=r,X[r]||this.defineDriver(n)}this._defaultConfig=rt({},et),this._config=rt({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o.prototype.config=function(t){if("object"!==(void 0===t?"undefined":r(t)))return"string"==typeof t?this._config[t]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)},o.prototype.defineDriver=function(u,t,e){var n=new f(function(e,n){try{var r=u._driver,t=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!u._driver)return void n(t);for(var o=tt.concat("_initStorage"),i=0,s=o.length;i<s;i++){var a=o[i];if((!z(Z,a)||u[a])&&"function"!=typeof u[a])return void n(t)}!function(){for(var t=function(n){return function(){var t=new Error("Method "+n+" is not implemented by the current driver"),e=f.reject(t);return h(e,arguments[arguments.length-1]),e}},e=0,n=Z.length;e<n;e++){var r=Z[e];u[r]||(u[r]=t(r))}}();var c=function(t){X[r]&&console.info("Redefining LocalForage driver: "+r),X[r]=u,Y[r]=t,e()};"_support"in u?u._support&&"function"==typeof u._support?u._support().then(c,n):c(!!u._support):c(!0)}catch(t){n(t)}});return c(n,t,e),n},o.prototype.driver=function(){return this._driver||null},o.prototype.getDriver=function(t,e,n){var r=X[t]?f.resolve(X[t]):f.reject(new Error("Driver not found."));return c(r,e,n),r},o.prototype.getSerializer=function(t){var e=f.resolve(V);return c(e,t),e},o.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return c(n,t,t),n},o.prototype.setDriver=function(t,e,n){var i=this;$(t)||(t=[t]);var r=this._getSupportedDrivers(t);function s(){i._config.driver=i.driver()}function a(t){return i._extend(t),s(),i._ready=i._initStorage(i._config),i._ready}var o=null!==this._driverSet?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=o.then(function(){var t=r[0];return i._dbInfo=null,i._ready=null,i.getDriver(t).then(function(t){var o;i._driver=t._driver,s(),i._wrapLibraryMethodsWithReady(),i._initDriver=(o=r,function(){var r=0;return function t(){for(;r<o.length;){var e=o[r];return r++,i._dbInfo=null,i._ready=null,i.getDriver(e).then(a).catch(t)}s();var n=new Error("No available storage method found.");return i._driverSet=f.reject(n),i._driverSet}()})})}).catch(function(){s();var t=new Error("No available storage method found.");return i._driverSet=f.reject(t),i._driverSet}),c(this._driverSet,e,n),this._driverSet},o.prototype.supports=function(t){return!!Y[t]},o.prototype._extend=function(t){rt(this,t)},o.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];this.supports(o)&&e.push(o)}return e},o.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=tt.length;t<e;t++)nt(this,tt[t])},o.prototype.createInstance=function(t){return new o(t)},o}());e.exports=ot},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(iU,jU,kU){var mU,nU;mU=this,nU=function(){return function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=r,o.i=function(t){return t},o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=6)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.css=e.deepExtend=e.animationEndEvents=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.inArray=function(t,e,n){var r=void 0;if(n){for(r in e)if(e.hasOwnProperty(r)&&e[r]===t)return!0}else for(r in e)if(e.hasOwnProperty(r)&&e[r]===t)return!0;return!1},e.stopPropagation=function(t){void 0!==(t=t||window.event).stopPropagation?t.stopPropagation():t.cancelBubble=!0},e.generateID=function(){var t="noty_"+(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")+"_";return t+="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},e.outerHeight=function(t){var e=t.offsetHeight,n=window.getComputedStyle(t);return e+=parseInt(n.marginTop)+parseInt(n.marginBottom)},e.addListener=o,e.hasClass=s,e.addClass=function(t,e){var n=c(t),r=n+e;if(s(n,e))return;t.className=r.substring(1)},e.removeClass=function(t,e){var n=c(t),r=void 0;if(!s(t,e))return;r=n.replace(" "+e+" "," "),t.className=r.substring(1,r.length-1)},e.remove=a,e.classList=c,e.visibilityChangeFlow=function(){var t=void 0,e=void 0;void 0!==document.hidden?(t="hidden",e="visibilitychange"):void 0!==document.msHidden?(t="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange");function n(){r.PageHidden?setTimeout(function(){Object.keys(r.Store).forEach(function(t){r.Store.hasOwnProperty(t)&&r.Store[t].options.visibilityControl&&r.Store[t].stop()})},100):setTimeout(function(){Object.keys(r.Store).forEach(function(t){r.Store.hasOwnProperty(t)&&r.Store[t].options.visibilityControl&&r.Store[t].resume()}),r.queueRenderAll()},100)}e&&o(document,e,function(){r.PageHidden=document[t],n()});o(window,"blur",function(){r.PageHidden=!0,n()}),o(window,"focus",function(){r.PageHidden=!1,n()})},e.createAudioElements=function(t){if(t.hasSound){var n=document.createElement("audio");t.options.sounds.sources.forEach(function(t){var e=document.createElement("source");e.src=t,e.type="audio/"+t.match(/\.([^.]+)$/)[1],n.appendChild(e)}),t.barDom?t.barDom.appendChild(n):document.querySelector("body").appendChild(n),n.volume=t.options.sounds.volume,t.soundPlayed||(n.play(),t.soundPlayed=!0),n.onended=function(){a(n)}}};var r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(1));e.animationEndEvents="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";e.deepExtend=function t(e){e=e||{};for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var o in r)r.hasOwnProperty(o)&&(Array.isArray(r[o])?e[o]=r[o]:"object"===i(r[o])&&null!==r[o]?e[o]=t(e[o],r[o]):e[o]=r[o])}return e};e.css=function(){var i=["Webkit","O","Moz","ms"],e={};function r(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()}),e[t]||(e[t]=function(t){var e=document.body.style;if(t in e)return t;for(var n=i.length,r=t.charAt(0).toUpperCase()+t.slice(1),o=void 0;n--;)if((o=i[n]+r)in e)return o;return t}(t))}function s(t,e,n){e=r(e),t.style[e]=n}return function(t,e){var n=arguments,r=void 0,o=void 0;if(2===n.length)for(r in e)e.hasOwnProperty(r)&&void 0!==(o=e[r])&&e.hasOwnProperty(r)&&s(t,r,o);else s(t,n[1],n[2])}}();function o(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];e=e.split(" ");for(var o=0;o<e.length;o++)document.addEventListener?t.addEventListener(e[o],n,r):document.attachEvent&&t.attachEvent("on"+e[o],n)}function s(t,e){return 0<=("string"==typeof t?t:c(t)).indexOf(" "+e+" ")}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function c(t){return(" "+(t&&t.className||"")+" ").replace(/\s+/gi," ")}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Defaults=r.Store=r.Queues=r.DefaultMaxVisible=r.docTitle=r.DocModalCount=r.PageHidden=void 0,r.getQueueCounts=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"global",n=0,t=a;c.hasOwnProperty(e)&&(t=c[e].maxVisible,Object.keys(u).forEach(function(t){u[t].options.queue!==e||u[t].closed||n++}));return{current:n,maxVisible:t}},r.addToQueue=function(t){c.hasOwnProperty(t.options.queue)||(c[t.options.queue]={maxVisible:a,queue:[]});c[t.options.queue].queue.push(t)},r.removeFromQueue=function(e){if(c.hasOwnProperty(e.options.queue)){var n=[];Object.keys(c[e.options.queue].queue).forEach(function(t){c[e.options.queue].queue[t].id!==e.id&&n.push(c[e.options.queue].queue[t])}),c[e.options.queue].queue=n}},r.queueRender=l,r.queueRenderAll=function(){Object.keys(c).forEach(function(t){l(t)})},r.ghostFix=function(t){var e=o.generateID("ghost"),n=document.createElement("div");n.setAttribute("id",e),o.css(n,{height:o.outerHeight(t.barDom)+"px"}),t.barDom.insertAdjacentHTML("afterend",n.outerHTML),o.remove(t.barDom),n=document.getElementById(e),o.addClass(n,"noty_fix_effects_height"),o.addListener(n,o.animationEndEvents,function(){o.remove(n)})},r.build=function(t){!function(t){if(t.options.container)return t.layoutDom=document.querySelector(t.options.container);var e="noty_layout__"+t.options.layout;t.layoutDom=document.querySelector("div#"+e),t.layoutDom||(t.layoutDom=document.createElement("div"),t.layoutDom.setAttribute("id",e),t.layoutDom.setAttribute("role","alert"),t.layoutDom.setAttribute("aria-live","polite"),o.addClass(t.layoutDom,"noty_layout"),document.querySelector("body").appendChild(t.layoutDom))}(t);var e='<div class="noty_body">'+t.options.text+"</div>"+function(e){if(f(e)){var n=document.createElement("div");return o.addClass(n,"noty_buttons"),Object.keys(e.options.buttons).forEach(function(t){n.appendChild(e.options.buttons[t].dom)}),e.options.buttons.forEach(function(t){n.appendChild(t.dom)}),n.outerHTML}return""}(t)+'<div class="noty_progressbar"></div>';t.barDom=document.createElement("div"),t.barDom.setAttribute("id",t.id),o.addClass(t.barDom,"noty_bar noty_type__"+t.options.type+" noty_theme__"+t.options.theme),t.barDom.innerHTML=e,d(t,"onTemplate")},r.hasButtons=f,r.handleModal=function(t){t.options.modal&&(0===i&&(e=document.querySelector("body"),n=document.createElement("div"),o.addClass(n,"noty_modal"),e.insertBefore(n,e.firstChild),o.addClass(n,"noty_modal_open"),o.addListener(n,o.animationEndEvents,function(){o.removeClass(n,"noty_modal_open")})),r.DocModalCount=i+=1);var e,n},r.handleModalClose=function(t){if(t.options.modal&&0<i&&(r.DocModalCount=i-=1,i<=0)){var e=document.querySelector(".noty_modal");e&&(o.removeClass(e,"noty_modal_open"),o.addClass(e,"noty_modal_close"),o.addListener(e,o.animationEndEvents,function(){o.remove(e)}))}},r.queueClose=h,r.dequeueClose=p,r.fire=d,r.openFlow=function(t){d(t,"afterShow"),h(t),o.addListener(t.barDom,"mouseenter",function(){p(t)}),o.addListener(t.barDom,"mouseleave",function(){h(t)})},r.closeFlow=function(t){delete u[t.id],t.closing=!1,d(t,"afterClose"),o.remove(t.barDom),0!==t.layoutDom.querySelectorAll(".noty_bar").length||t.options.container||o.remove(t.layoutDom);(o.inArray("docVisible",t.options.titleCount.conditions)||o.inArray("docHidden",t.options.titleCount.conditions))&&s.decrement();l(t.options.queue)};var o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(e(0));r.PageHidden=!1;var i=r.DocModalCount=0,n={originalTitle:null,count:0,changed:!1,timer:-1},s=r.docTitle={increment:function(){n.count++,s._update()},decrement:function(){n.count--,n.count<=0?s._clear():s._update()},_update:function(){var t=document.title;n.changed?document.title="("+n.count+") "+n.originalTitle:(n.originalTitle=t,document.title="("+n.count+") "+t,n.changed=!0)},_clear:function(){n.changed&&(n.count=0,document.title=n.originalTitle,n.changed=!1)}},a=r.DefaultMaxVisible=5,c=r.Queues={global:{maxVisible:a,queue:[]}},u=r.Store={};r.Defaults={type:"alert",layout:"topRight",theme:"mint",text:"",timeout:!1,progressBar:!0,closeWith:["click"],animation:{open:"noty_effects_open",close:"noty_effects_close"},id:!1,force:!1,killer:!1,queue:"global",container:!1,buttons:[],callbacks:{beforeShow:null,onShow:null,afterShow:null,onClose:null,afterClose:null,onClick:null,onHover:null,onTemplate:null},sounds:{sources:[],volume:1,conditions:[]},titleCount:{conditions:[]},modal:!1,visibilityControl:!1};function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"global";if(c.hasOwnProperty(t)){var e=c[t].queue.shift();e&&e.show()}}function f(t){return!(!t.options.buttons||!Object.keys(t.options.buttons).length)}function h(t){t.options.timeout&&(t.options.progressBar&&t.progressDom&&o.css(t.progressDom,{transition:"width "+t.options.timeout+"ms linear",width:"0%"}),clearTimeout(t.closeTimer),t.closeTimer=setTimeout(function(){t.close()},t.options.timeout))}function p(t){t.options.timeout&&t.closeTimer&&(clearTimeout(t.closeTimer),t.closeTimer=-1,t.options.progressBar&&t.progressDom&&o.css(t.progressDom,{transition:"width 0ms linear",width:"100%"}))}function d(e,t){e.listeners.hasOwnProperty(t)&&e.listeners[t].forEach(function(t){"function"==typeof t&&t.apply(e)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotyButton=void 0;var s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(0));e.NotyButton=function t(e,n,r){var o=this,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dom=document.createElement("button"),this.dom.innerHTML=e,this.id=i.id=i.id||s.generateID("button"),this.cb=r,Object.keys(i).forEach(function(t){o.dom.setAttribute(t,i[t])}),s.addClass(this.dom,n||"noty_btn"),this}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();e.Push=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"/service-worker.js";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.subData={},this.workerPath=t,this.listeners={onPermissionGranted:[],onPermissionDenied:[],onSubscriptionSuccess:[],onSubscriptionCancel:[],onWorkerError:[],onWorkerSuccess:[],onWorkerNotSupported:[]},this}return r(e,[{key:"on",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};return"function"==typeof e&&this.listeners.hasOwnProperty(t)&&this.listeners[t].push(e),this}},{key:"fire",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];this.listeners.hasOwnProperty(t)&&this.listeners[t].forEach(function(t){"function"==typeof t&&t.apply(e,n)})}},{key:"create",value:function(){console.log("NOT IMPLEMENTED YET")}},{key:"isSupported",value:function(){var t=!1;try{t=window.Notification||window.webkitNotifications||navigator.mozNotification||window.external&&void 0!==window.external.msIsSiteMode()}catch(t){}return t}},{key:"getPermissionStatus",value:function(){var t="default";if(window.Notification&&window.Notification.permissionLevel)t=window.Notification.permissionLevel;else if(window.webkitNotifications&&window.webkitNotifications.checkPermission)switch(window.webkitNotifications.checkPermission()){case 1:t="default";break;case 0:t="granted";break;default:t="denied"}else window.Notification&&window.Notification.permission?t=window.Notification.permission:navigator.mozNotification?t="granted":window.external&&void 0!==window.external.msIsSiteMode()&&(t=window.external.msIsSiteMode()?"granted":"default");return t.toString().toLowerCase()}},{key:"getEndpoint",value:function(t){var e=t.endpoint,n=t.subscriptionId;return n&&-1===e.indexOf(n)&&(e+="/"+n),e}},{key:"isSWRegistered",value:function(){try{return"activated"===navigator.serviceWorker.controller.state}catch(t){return!1}}},{key:"unregisterWorker",value:function(){var s=this;"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(t){var e=!0,n=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){o.value.unregister(),s.fire("onSubscriptionCancel")}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}})}},{key:"requestSubscription",value:function(){var e=this,n=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],r=this,t=this.getPermissionStatus(),o=function(t){"granted"===t?(e.fire("onPermissionGranted"),"serviceWorker"in navigator?navigator.serviceWorker.register(e.workerPath).then(function(){navigator.serviceWorker.ready.then(function(t){r.fire("onWorkerSuccess"),t.pushManager.subscribe({userVisibleOnly:n}).then(function(t){var e=t.getKey("p256dh"),n=t.getKey("auth");r.subData={endpoint:r.getEndpoint(t),p256dh:e?window.btoa(String.fromCharCode.apply(null,new Uint8Array(e))):null,auth:n?window.btoa(String.fromCharCode.apply(null,new Uint8Array(n))):null},r.fire("onSubscriptionSuccess",[r.subData])}).catch(function(t){r.fire("onWorkerError",[t])})})}):r.fire("onWorkerNotSupported")):"denied"===t&&(e.fire("onPermissionDenied"),e.unregisterWorker())};"default"===t?window.Notification&&window.Notification.requestPermission?window.Notification.requestPermission(o):window.webkitNotifications&&window.webkitNotifications.checkPermission&&window.webkitNotifications.requestPermission(o):o(t)}}]),e}()},function(e,t,G){(function(H,B){var t;t=function(){"use strict";function u(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,e=void 0,o=void 0,a=function(t,e){h[r]=t,h[r+1]=e,2===(r+=2)&&(o?o(p):b())};var t="undefined"!=typeof window?window:void 0,i=t||{},s=i.MutationObserver||i.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==H&&"[object process]"==={}.toString.call(H),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(p,1)}}var h=new Array(1e3);function p(){for(var t=0;t<r;t+=2){(0,h[t])(h[t+1]),h[t]=void 0,h[t+1]=void 0}r=0}var d,v,y,_,b=void 0;function m(t,e){var n=arguments,r=this,o=new this.constructor(E);void 0===o[w]&&U(o);var i,s=r._state;return s?(i=n[s-1],a(function(){return N(s,o,i,r._result)})):R(r,o,t,e),o}function g(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(E);return T(e,t),e}b=c?function(){return H.nextTick(p)}:s?(v=0,y=new s(p),_=document.createTextNode(""),y.observe(_,{characterData:!0}),function(){_.data=v=++v%2}):l?((d=new MessageChannel).port1.onmessage=p,function(){return d.port2.postMessage(0)}):void 0===t?function(){try{var t=G(9);return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(p)}:f()}catch(t){return f()}}():f();var w=Math.random().toString(36).substring(16);function E(){}var C=void 0,S=1,j=2,k=new D;function x(t){try{return t.then}catch(t){return k.error=t,k}}function O(t,e,n){var r,o,i,s;e.constructor===t.constructor&&n===m&&e.constructor.resolve===g?(i=t,(s=e)._state===S?A(i,s._result):s._state===j?F(i,s._result):R(s,void 0,function(t){return T(i,t)},function(t){return F(i,t)})):n===k?(F(t,k.error),k.error=null):void 0===n?A(t,e):u(n)?(r=e,o=n,a(function(e){var n=!1,t=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(o,r,function(t){n||(n=!0,r!==t?T(e,t):A(e,t))},function(t){n||(n=!0,F(e,t))},e._label);!n&&t&&(n=!0,F(e,t))},t)):A(t,e)}function T(t,e){var n,r;t===e?F(t,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=e),null===n||"object"!==r&&"function"!==r?A(t,e):O(t,e,x(e)))}function P(t){t._onerror&&t._onerror(t._result),I(t)}function A(t,e){t._state===C&&(t._result=e,t._state=S,0!==t._subscribers.length&&a(I,t))}function F(t,e){t._state===C&&(t._state=j,t._result=e,a(P,t))}function R(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+S]=n,o[i+j]=r,0===i&&t._state&&a(I,t)}function I(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?N(n,r,o,i):o(i);t._subscribers.length=0}}function D(){this.error=null}var M=new D;function N(t,e,n,r){var o=u(n),i=void 0,s=void 0,a=void 0,c=void 0;if(o){if((i=function(t,e){try{return t(e)}catch(t){return M.error=t,M}}(n,r))===M?(c=!0,s=i.error,i.error=null):a=!0,e===i)return void F(e,new TypeError("A promises callback cannot return that same promise."))}else i=r,a=!0;e._state!==C||(o&&a?T(e,i):c?F(e,s):t===S?A(e,i):t===j&&F(e,i))}var L=0;function U(t){t[w]=L++,t._state=void 0,t._result=void 0,t._subscribers=[]}function V(t,e){this._instanceConstructor=t,this.promise=new t(E),this.promise[w]||U(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&A(this.promise,this._result))):F(this.promise,new Error("Array Methods must be provided an Array"))}function q(t){this[w]=L++,this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(e,t){try{t(function(t){T(e,t)},function(t){F(e,t)})}catch(t){F(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return V.prototype._enumerate=function(t){for(var e=0;this._state===C&&e<t.length;e++)this._eachEntry(t[e],e)},V.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===g){var o=x(e);if(o===m&&e._state!==C)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===q){var i=new n(E);O(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},V.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===C&&(this._remaining--,t===j?F(r,n):this._result[e]=n),0===this._remaining&&A(r,this._result)},V.prototype._willSettleAt=function(t,e){var n=this;R(t,void 0,function(t){return n._settledAt(S,e,t)},function(t){return n._settledAt(j,e,t)})},q.all=function(t){return new V(this,t).promise},q.race=function(o){var i=this;return n(o)?new i(function(t,e){for(var n=o.length,r=0;r<n;r++)i.resolve(o[r]).then(t,e)}):new i(function(t,e){return e(new TypeError("You must pass an array to race."))})},q.resolve=g,q.reject=function(t){var e=new this(E);return F(e,t),e},q._setScheduler=function(t){o=t},q._setAsap=function(t){a=t},q._asap=a,q.prototype={constructor:q,then:m,catch:function(t){return this.then(null,t)}},q.polyfill=function(){var t=void 0;if(void 0!==B)t=B;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=q},q.Promise=q},e.exports=t()}).call(t,G(7),G(8))},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();n(5);var r,i=n(4),s=(r=i)&&r.__esModule?r:{default:r},a=f(n(0)),c=f(n(1)),u=n(2),l=n(3);function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var h=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.options=a.deepExtend({},c.Defaults,t),c.Store[this.options.id]?c.Store[this.options.id]:(this.id=this.options.id||a.generateID("bar"),this.closeTimer=-1,this.barDom=null,this.layoutDom=null,this.progressDom=null,this.showing=!1,this.shown=!1,this.closed=!1,this.closing=!1,this.killable=this.options.timeout||0<this.options.closeWith.length,this.hasSound=0<this.options.sounds.sources.length,this.soundPlayed=!1,this.listeners={beforeShow:[],onShow:[],afterShow:[],onClose:[],afterClose:[],onClick:[],onHover:[],onTemplate:[]},this.promises={show:null,close:null},this.on("beforeShow",this.options.callbacks.beforeShow),this.on("onShow",this.options.callbacks.onShow),this.on("afterShow",this.options.callbacks.afterShow),this.on("onClose",this.options.callbacks.onClose),this.on("afterClose",this.options.callbacks.afterClose),this.on("onClick",this.options.callbacks.onClick),this.on("onHover",this.options.callbacks.onHover),this.on("onTemplate",this.options.callbacks.onTemplate),this)}return o(r,[{key:"on",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};return"function"==typeof e&&this.listeners.hasOwnProperty(t)&&this.listeners[t].push(e),this}},{key:"show",value:function(){var n=this;if(this.showing||this.shown)return this;!0===this.options.killer?r.closeAll():"string"==typeof this.options.killer&&r.closeAll(this.options.killer);var t=c.getQueueCounts(this.options.queue);if(t.current>=t.maxVisible||c.PageHidden&&this.options.visibilityControl)return c.addToQueue(this),c.PageHidden&&this.hasSound&&a.inArray("docHidden",this.options.sounds.conditions)&&a.createAudioElements(this),c.PageHidden&&a.inArray("docHidden",this.options.titleCount.conditions)&&c.docTitle.increment(),this;if(c.Store[this.id]=this,c.fire(this,"beforeShow"),this.showing=!0,this.closing)return this.showing=!1,this;if(c.build(this),c.handleModal(this),this.options.force?this.layoutDom.insertBefore(this.barDom,this.layoutDom.firstChild):this.layoutDom.appendChild(this.barDom),this.hasSound&&!this.soundPlayed&&a.inArray("docVisible",this.options.sounds.conditions)&&a.createAudioElements(this),a.inArray("docVisible",this.options.titleCount.conditions)&&c.docTitle.increment(),this.shown=!0,this.closed=!1,c.hasButtons(this)&&Object.keys(this.options.buttons).forEach(function(e){var t=n.barDom.querySelector("#"+n.options.buttons[e].id);a.addListener(t,"click",function(t){a.stopPropagation(t),n.options.buttons[e].cb(n)})}),this.progressDom=this.barDom.querySelector(".noty_progressbar"),a.inArray("click",this.options.closeWith)&&(a.addClass(this.barDom,"noty_close_with_click"),a.addListener(this.barDom,"click",function(t){a.stopPropagation(t),c.fire(n,"onClick"),n.close()},!1)),a.addListener(this.barDom,"mouseenter",function(){c.fire(n,"onHover")},!1),this.options.timeout&&a.addClass(this.barDom,"noty_has_timeout"),this.options.progressBar&&a.addClass(this.barDom,"noty_has_progressbar"),a.inArray("button",this.options.closeWith)){a.addClass(this.barDom,"noty_close_with_button");var e=document.createElement("div");a.addClass(e,"noty_close_button"),e.innerHTML="×",this.barDom.appendChild(e),a.addListener(e,"click",function(t){a.stopPropagation(t),n.close()},!1)}return c.fire(this,"onShow"),null===this.options.animation.open?this.promises.show=new s.default(function(t){t()}):"function"==typeof this.options.animation.open?this.promises.show=new s.default(this.options.animation.open.bind(this)):(a.addClass(this.barDom,this.options.animation.open),this.promises.show=new s.default(function(t){a.addListener(n.barDom,a.animationEndEvents,function(){a.removeClass(n.barDom,n.options.animation.open),t()})})),this.promises.show.then(function(){var t=n;setTimeout(function(){c.openFlow(t)},100)}),this}},{key:"stop",value:function(){return c.dequeueClose(this),this}},{key:"resume",value:function(){return c.queueClose(this),this}},{key:"setTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){if(this.stop(),this.options.timeout=t,this.barDom){this.options.timeout?a.addClass(this.barDom,"noty_has_timeout"):a.removeClass(this.barDom,"noty_has_timeout");var e=this;setTimeout(function(){e.resume()},100)}return this})},{key:"setText",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.barDom&&(this.barDom.querySelector(".noty_body").innerHTML=t),e&&(this.options.text=t),this}},{key:"setType",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.barDom&&(a.classList(this.barDom).split(" ").forEach(function(t){"noty_type__"===t.substring(0,11)&&a.removeClass(e.barDom,t)}),a.addClass(this.barDom,"noty_type__"+t));return n&&(this.options.type=t),this}},{key:"setTheme",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.barDom&&(a.classList(this.barDom).split(" ").forEach(function(t){"noty_theme__"===t.substring(0,12)&&a.removeClass(e.barDom,t)}),a.addClass(this.barDom,"noty_theme__"+t));return n&&(this.options.theme=t),this}},{key:"close",value:function(){var e=this;return this.closed||(this.shown?(c.fire(this,"onClose"),this.closing=!0,null===this.options.animation.close||!1===this.options.animation.close?this.promises.close=new s.default(function(t){t()}):"function"==typeof this.options.animation.close?this.promises.close=new s.default(this.options.animation.close.bind(this)):(a.addClass(this.barDom,this.options.animation.close),this.promises.close=new s.default(function(t){a.addListener(e.barDom,a.animationEndEvents,function(){e.options.force?a.remove(e.barDom):c.ghostFix(e),t()})})),this.promises.close.then(function(){c.closeFlow(e),c.handleModalClose(e)}),this.closed=!0):c.removeFromQueue(this)),this}}],[{key:"closeAll",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return Object.keys(c.Store).forEach(function(t){e?c.Store[t].options.queue===e&&c.Store[t].killable&&c.Store[t].close():c.Store[t].killable&&c.Store[t].close()}),this}},{key:"clearQueue",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"global";return c.Queues.hasOwnProperty(t)&&(c.Queues[t].queue=[]),this}},{key:"overrideDefaults",value:function(t){return c.Defaults=a.deepExtend({},c.Defaults,t),this}},{key:"setMaxVisible",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c.DefaultMaxVisible,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"global";return c.Queues.hasOwnProperty(e)||(c.Queues[e]={maxVisible:t,queue:[]}),c.Queues[e].maxVisible=t,this}},{key:"button",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return new u.NotyButton(t,e,n,r)}},{key:"version",value:function(){return"3.2.0-beta"}},{key:"Push",value:function(t){return new l.Push(t)}},{key:"Queues",get:function(){return c.Queues}},{key:"PageHidden",get:function(){return c.PageHidden}}]),r}();e.default=h,"undefined"!=typeof window&&a.visibilityChangeFlow(),t.exports=e.default},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,u=[],l=!1,f=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var e=u.length;e;){for(c=u,u=[];++f<e;)c&&c[f].run();f=-1,e=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(A3,B3){var C3;C3=function(){return this}();try{C3=C3||Function("return this")()||eval("this")}catch(t){"object"==typeof window&&(C3=window)}A3.exports=C3},function(t,e){}])},"object"==typeof kU&&"object"==typeof jU?jU.exports=nU():"function"==typeof define&&define.amd?define("Noty",[],nU):"object"==typeof kU?kU.Noty=nU():mU.Noty=nU()},{}],4:[function(t,e,n){var r,o,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(t){o=a}}();var u,l=[],f=!1,h=-1;function p(){f&&u&&(f=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!f){var t=c(p);f=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new v(t,e)),1!==l.length||f||c(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],5:[function(t,e,n){"use strict";var i=t("./util/root"),s=t("./util/toSubscriber"),r=t("./symbol/observable"),o=t("./util/pipe"),a=function(){function n(t){this._isScalar=!1,t&&(this._subscribe=t)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(t,e,n){var r=this.operator,o=s.toSubscriber(t,e,n);if(r?r.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},n.prototype.forEach=function(r,t){var o=this;if(t||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?t=i.root.Rx.config.Promise:i.root.Promise&&(t=i.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,e){var n;n=o.subscribe(function(t){if(n)try{r(t)}catch(t){e(t),n.unsubscribe()}else r(t)},e,t)})},n.prototype._subscribe=function(t){return this.source.subscribe(t)},n.prototype[r.observable]=function(){return this},n.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:o.pipeFromArray(t)(this)},n.prototype.toPromise=function(t){var r=this;if(t||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?t=i.root.Rx.config.Promise:i.root.Promise&&(t=i.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,e){var n;r.subscribe(function(t){return n=t},function(t){return e(t)},function(){return t(n)})})},n.create=function(t){return new n(t)},n}();n.Observable=a},{"./symbol/observable":28,"./util/pipe":38,"./util/root":39,"./util/toSubscriber":40}],6:[function(t,e,n){"use strict";n.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},{}],7:[function(t,e,n){"use strict";var r=function(){function n(t,e){void 0===e&&(e=n.now),this.SchedulerAction=t,this.now=e}return n.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},n.now=Date.now?Date.now:function(){return+new Date},n}();n.Scheduler=r},{}],8:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("./Observable"),i=t("./Subscriber"),s=t("./Subscription"),a=t("./util/ObjectUnsubscribedError"),c=t("./SubjectSubscription"),u=t("./symbol/rxSubscriber"),l=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(i.Subscriber);n.SubjectSubscriber=l;var f=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[u.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(t){var e=new h(this,this);return e.operator=t,e},t.prototype.next=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].next(t)},t.prototype.error=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),o=0;o<n;o++)r[o].error(t);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},t.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},t.create=function(t,e){return new h(t,e)},t}(o.Observable),h=function(n){function t(t,e){n.call(this),this.destination=t,this.source=e}return r(t,n),t.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},t.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},t.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},t.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},t}(n.Subject=f);n.AnonymousSubject=h},{"./Observable":5,"./SubjectSubscription":9,"./Subscriber":10,"./Subscription":11,"./symbol/rxSubscriber":29,"./util/ObjectUnsubscribedError":30}],9:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(n){function t(t,e){n.call(this),this.subject=t,this.subscriber=e,this.closed=!1}return r(t,n),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},t}(t("./Subscription").Subscription);n.SubjectSubscription=o},{"./Subscription":11}],10:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},a=t("./util/isFunction"),o=t("./Subscription"),c=t("./Observer"),s=t("./symbol/rxSubscriber"),u=function(i){function o(t,e,n){switch(i.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=c.empty;break;case 1:if(!t){this.destination=c.empty;break}if("object"==typeof t){if((o=t)instanceof u||"syncErrorThrowable"in o&&o[s.rxSubscriber]){var r=t[s.rxSubscriber]();this.syncErrorThrowable=r.syncErrorThrowable,(this.destination=r).add(this)}else this.syncErrorThrowable=!0,this.destination=new l(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}var o}return r(o,i),o.prototype[s.rxSubscriber]=function(){return this},o.create=function(t,e,n){var r=new o(t,e,n);return r.syncErrorThrowable=!1,r},o.prototype.next=function(t){this.isStopped||this._next(t)},o.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},o.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},o.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},o.prototype._next=function(t){this.destination.next(t)},o.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},o.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},o.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},o}(o.Subscription),l=function(s){function t(t,e,n,r){var o;s.call(this),this._parentSubscriber=t;var i=this;a.isFunction(e)?o=e:e&&(o=e.next,n=e.error,r=e.complete,e!==c.empty&&(i=Object.create(e),a.isFunction(i.unsubscribe)&&this.add(i.unsubscribe.bind(i)),i.unsubscribe=this.unsubscribe.bind(this))),this._context=i,this._next=o,this._error=n,this._complete=r}return r(t,s),t.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?this.__tryOrSetError(e,n):this.__tryOrUnsub(n),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(n.Subscriber=u)},{"./Observer":6,"./Subscription":11,"./symbol/rxSubscriber":29,"./util/isFunction":34}],11:[function(t,e,n){"use strict";var l=t("./util/isArray"),f=t("./util/isObject"),h=t("./util/isFunction"),p=t("./util/tryCatch"),d=t("./util/errorObject"),v=t("./util/UnsubscriptionError"),r=function(){function r(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return r.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=r?r.length:0;n;)n.remove(this),n=++s<a&&r[s]||null;if(h.isFunction(o))p.tryCatch(o).call(this)===d.errorObject&&(e=!0,t=t||(d.errorObject.e instanceof v.UnsubscriptionError?y(d.errorObject.e.errors):[d.errorObject.e]));if(l.isArray(i))for(s=-1,a=i.length;++s<a;){var c=i[s];if(f.isObject(c))if(p.tryCatch(c.unsubscribe).call(c)===d.errorObject){e=!0,t=t||[];var u=d.errorObject.e;u instanceof v.UnsubscriptionError?t=t.concat(y(u.errors)):t.push(u)}}if(e)throw new v.UnsubscriptionError(t)}},r.prototype.add=function(t){if(!t||t===r.EMPTY)return r.EMPTY;if(t===this)return this;var e=t;switch(typeof t){case"function":e=new r(t);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){var n=e;(e=new r)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},r.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},r.EMPTY=((t=new r).closed=!0,t),r}();function y(t){return t.reduce(function(t,e){return t.concat(e instanceof v.UnsubscriptionError?e.errors:e)},[])}n.Subscription=r},{"./util/UnsubscriptionError":31,"./util/errorObject":32,"./util/isArray":33,"./util/isFunction":34,"./util/isObject":36,"./util/tryCatch":41}],12:[function(t,e,n){"use strict";var r=t("../../Observable"),o=t("../../observable/fromEvent");r.Observable.fromEvent=o.fromEvent},{"../../Observable":5,"../../observable/fromEvent":18}],13:[function(t,e,n){"use strict";var r=t("../../Observable"),o=t("../../observable/interval");r.Observable.interval=o.interval},{"../../Observable":5,"../../observable/interval":19}],14:[function(t,e,n){"use strict";var r=t("../../Observable"),o=t("../../operator/filter");r.Observable.prototype.filter=o.filter},{"../../Observable":5,"../../operator/filter":20}],15:[function(t,e,n){"use strict";var r=t("../../Observable"),o=t("../../operator/map");r.Observable.prototype.map=o.map},{"../../Observable":5,"../../operator/map":21}],16:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("../Observable"),i=t("../util/tryCatch"),s=t("../util/isFunction"),a=t("../util/errorObject"),_=t("../Subscription"),b=Object.prototype.toString;var c=function(o){function y(t,e,n,r){o.call(this),this.sourceObj=t,this.eventName=e,this.selector=n,this.options=r}return r(y,o),y.create=function(t,e,n,r){return s.isFunction(n)&&(r=n,n=void 0),new y(t,e,r,n)},y.setupSubscription=function(t,e,n,r,o){var i,s,a,c,u,l;if((l=t)&&"[object NodeList]"===b.call(l)||(u=t)&&"[object HTMLCollection]"===b.call(u))for(var f=0,h=t.length;f<h;f++)y.setupSubscription(t[f],e,n,r,o);else if((c=t)&&"function"==typeof c.addEventListener&&"function"==typeof c.removeEventListener){var p=t;t.addEventListener(e,n,o),i=function(){return p.removeEventListener(e,n,o)}}else if((a=t)&&"function"==typeof a.on&&"function"==typeof a.off){var d=t;t.on(e,n),i=function(){return d.off(e,n)}}else{if(!(s=t)||"function"!=typeof s.addListener||"function"!=typeof s.removeListener)throw new TypeError("Invalid event target");var v=t;t.addListener(e,n),i=function(){return v.removeListener(e,n)}}r.add(new _.Subscription(i))},y.prototype._subscribe=function(r){var t=this.sourceObj,e=this.eventName,n=this.options,o=this.selector;y.setupSubscription(t,e,o?function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=i.tryCatch(o).apply(void 0,t);n===a.errorObject?r.error(a.errorObject.e):r.next(n)}:function(t){return r.next(t)},r,n)},y}(o.Observable);n.FromEventObservable=c},{"../Observable":5,"../Subscription":11,"../util/errorObject":32,"../util/isFunction":34,"../util/tryCatch":41}],17:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../util/isNumeric"),r=t("../Observable"),s=t("../scheduler/async"),a=function(n){function r(t,e){void 0===t&&(t=0),void 0===e&&(e=s.async),n.call(this),this.period=t,this.scheduler=e,(!i.isNumeric(t)||t<0)&&(this.period=0),e&&"function"==typeof e.schedule||(this.scheduler=s.async)}return o(r,n),r.create=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=s.async),new r(t,e)},r.dispatch=function(t){var e=t.index,n=t.subscriber,r=t.period;n.next(e),n.closed||(t.index+=1,this.schedule(t,r))},r.prototype._subscribe=function(t){var e=this.period,n=this.scheduler;t.add(n.schedule(r.dispatch,e,{index:0,subscriber:t,period:e}))},r}(r.Observable);n.IntervalObservable=a},{"../Observable":5,"../scheduler/async":27,"../util/isNumeric":35}],18:[function(t,e,n){"use strict";var r=t("./FromEventObservable");n.fromEvent=r.FromEventObservable.create},{"./FromEventObservable":16}],19:[function(t,e,n){"use strict";var r=t("./IntervalObservable");n.interval=r.IntervalObservable.create},{"./IntervalObservable":17}],20:[function(t,e,n){"use strict";var r=t("../operators/filter");n.filter=function(t,e){return r.filter(t,e)(this)}},{"../operators/filter":22}],21:[function(t,e,n){"use strict";var r=t("../operators/map");n.map=function(t,e){return r.map(t,e)(this)}},{"../operators/map":23}],22:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},r=t("../Subscriber");n.filter=function(e,n){return function(t){return t.lift(new i(e,n))}};var i=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},t}(),s=function(r){function t(t,e,n){r.call(this,t),this.predicate=e,this.thisArg=n,this.count=0}return o(t,r),t.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},t}(r.Subscriber)},{"../Subscriber":10}],23:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},r=t("../Subscriber");n.map=function(e,n){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new i(e,n))}};var i=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}();n.MapOperator=i;var s=function(r){function t(t,e,n){r.call(this,t),this.project=e,this.count=0,this.thisArg=n||this}return o(t,r),t.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(r.Subscriber)},{"../Subscriber":10}],24:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(n){function t(t,e){n.call(this)}return r(t,n),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},t}(t("../Subscription").Subscription);n.Action=o},{"../Subscription":11}],25:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("../util/root"),i=function(n){function t(t,e){n.call(this,t,e),this.scheduler=t,this.pending=!1,this.work=e}return r(t,n),t.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},t.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),o.root.setInterval(t.flush.bind(t,this),n)},t.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;o.root.clearInterval(e)},t.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},t}(t("./Action").Action);n.AsyncAction=i},{"../util/root":39,"./Action":24}],26:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(t("../Scheduler").Scheduler);n.AsyncScheduler=o},{"../Scheduler":7}],27:[function(t,e,n){"use strict";var r=t("./AsyncAction"),o=t("./AsyncScheduler");n.async=new o.AsyncScheduler(r.AsyncAction)},{"./AsyncAction":25,"./AsyncScheduler":26}],28:[function(t,e,n){"use strict";var r=t("../util/root");function o(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.getSymbolObservable=o,n.observable=o(r.root),n.$$observable=n.observable},{"../util/root":39}],29:[function(t,e,n){"use strict";var r=t("../util/root").root.Symbol;n.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",n.$$rxSubscriber=n.rxSubscriber},{"../util/root":39}],30:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);n.ObjectUnsubscribedError=o},{}],31:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=function(n){function t(t){n.call(this),this.errors=t;var e=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=e.name="UnsubscriptionError",this.stack=e.stack,this.message=e.message}return r(t,n),t}(Error);n.UnsubscriptionError=o},{}],32:[function(t,e,n){"use strict";n.errorObject={e:{}}},{}],33:[function(t,e,n){"use strict";n.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},{}],34:[function(t,e,n){"use strict";n.isFunction=function(t){return"function"==typeof t}},{}],35:[function(t,e,n){"use strict";var r=t("../util/isArray");n.isNumeric=function(t){return!r.isArray(t)&&0<=t-parseFloat(t)+1}},{"../util/isArray":33}],36:[function(t,e,n){"use strict";n.isObject=function(t){return null!=t&&"object"==typeof t}},{}],37:[function(t,e,n){"use strict";n.noop=function(){}},{}],38:[function(t,e,n){"use strict";var r=t("./noop");function o(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)}:r.noop}n.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return o(t)},n.pipeFromArray=o},{"./noop":37}],39:[function(t,e,o){(function(t){"use strict";var e="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,r=e||void 0!==t&&t||n;o.root=r,function(){if(!r)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(t,e,n){"use strict";var r=t("../Subscriber"),o=t("../symbol/rxSubscriber"),i=t("../Observer");n.toSubscriber=function(t,e,n){if(t){if(t instanceof r.Subscriber)return t;if(t[o.rxSubscriber])return t[o.rxSubscriber]()}return t||e||n?new r.Subscriber(t,e,n):new r.Subscriber(i.empty)}},{"../Observer":6,"../Subscriber":10,"../symbol/rxSubscriber":29}],41:[function(t,e,n){"use strict";var r,o=t("./errorObject");function i(){try{return r.apply(this,arguments)}catch(t){return o.errorObject.e=t,o.errorObject}}n.tryCatch=function(t){return r=t,i}},{"./errorObject":32}],42:[function(c,t,u){(function(t,e){var r=c("process/browser.js").nextTick,n=Function.prototype.apply,o=Array.prototype.slice,i={},s=0;function a(t,e){this._id=t,this._clearFn=e}u.setTimeout=function(){return new a(n.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new a(n.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(t){t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},u.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},u._unrefActive=u.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},u.setImmediate="function"==typeof t?t:function(t){var e=s++,n=!(arguments.length<2)&&o.call(arguments,1);return i[e]=!0,r(function(){i[e]&&(n?t.apply(null,n):t.call(null),u.clearImmediate(e))}),e},u.clearImmediate="function"==typeof e?e:function(t){delete i[t]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":4,timers:42}],43:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=t("./services/timer.service"),p=t("./components/GeneratorComponent/GeneratorComponent"),s=t("./components/VaultComponent"),o=t("./components/ClickComponent"),a=t("./services/mathUtils.service"),c=t("./components/GeneratorCollectionComponent"),u=t("./services/storage.service"),l=t("./services/save.service"),f=new o.ClickComponent(".clicker"),h=new c.GeneratorCollectionComponent(".generators-container");h.setTimer(r.timerService),h.setMathUtils(a.mathUtilsService),u.storageService.config().then(function(){return u.storageService.read()}).then(function(t){if(t[0]&&t[1]){var e=t[0],n=e.value,r=e.totalSum,o=e.generatedPerSecond;i=new s.VaultComponent(".vault",n,r,o),h.setVault(i),d(t[1],h),i.addMoneyEventSource(f)}else y();v(i,h)},function(){y(),v(i,h)});var d=function(t,e){for(var n=0,r=t;n<r.length;n++){var o=r[n],i=o.amount,s=o.className,a=o.frequency,c=o.name,u=o.price,l=o.quantity,f=o.sumGenerated,h=new p.GeneratorComponent(c,u,i,l,a,f,s);e.addComponent(h)}},v=function(t,e){l.saveService.setVault(t),l.saveService.setGeneratorCollection(e)},y=function(){(i=new s.VaultComponent(".vault")).addMoneyEventSource(f),h.setVault(i),h.addComponent(new p.GeneratorComponent("artificial arm",20,1,0,10,0,"arm")),h.addComponent(new p.GeneratorComponent("robot",100,1,0,1,0,"robot")),h.addComponent(new p.GeneratorComponent("assembly line",1100,8,0,1,0,"assembly")),h.addComponent(new p.GeneratorComponent("fission reactor",12e3,47,0,1,0,"reactor")),h.addComponent(new p.GeneratorComponent("tokamak",13e4,260,0,1,0,"tokamak"))}},{"./components/ClickComponent":44,"./components/GeneratorCollectionComponent":45,"./components/GeneratorComponent/GeneratorComponent":46,"./components/VaultComponent":50,"./services/mathUtils.service":56,"./services/save.service":57,"./services/storage.service":58,"./services/timer.service":59}],44:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("rxjs/Observable");t("rxjs/add/operator/map"),t("rxjs/add/observable/fromEvent");var o=t("../model/events/MoneyChangeEvent"),i=function(){function t(t){var e=document.querySelector(t);e&&(this.htmlElement=e,this.moneyEventSource=r.Observable.fromEvent(this.htmlElement,"click").map(function(){return new o.MoneyChangeEvent(1)}))}return t.prototype.getObservable=function(){return this.moneyEventSource},t.prototype.subscribe=function(t){this.moneyEventSource.subscribe(t)},t}();n.ClickComponent=i},{"../model/events/MoneyChangeEvent":54,"rxjs/Observable":5,"rxjs/add/observable/fromEvent":12,"rxjs/add/operator/map":15}],45:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../model/events/ChangeEvent"),o=t("rxjs/Subject"),i=t("../utils/RxUtils"),s=function(){function t(t){var e=this;this.generatorsArray=[],this.subject=new o.Subject,this.handleChangeEvent=function(t){t&&t instanceof r.ChangeEvent&&"GenPerSec"===t.propertyName&&e.subject.next(new r.ChangeEvent("ClicksPerSec",e.calculateGeneratedPerSecond()))};var n=document.querySelector(t);n&&(this.htmlElement=n,this.propertyChangeEventObserver=i.createObserver(this.handleChangeEvent,"error in GeneratorCollectionComponent, propertyChangeEventObserver creator"))}return t.prototype.getObservable=function(){return this.subject},t.prototype.subscribe=function(t){this.subject.subscribe(t)},t.prototype.setMathUtils=function(t){t&&(this.mathUtils=t)},t.prototype.setTimer=function(t){t&&(this.timer=t)},t.prototype.setVault=function(t){t&&(this.vault=t,this.vault.addPropertyEventSource(this))},t.prototype.addComponent=function(t){t&&(t.setMathUtils(this.mathUtils),t.addVault(this.vault),t.addTimer(this.timer),t.subscribe(this.propertyChangeEventObserver),this.addToHTML(t.getHtmlElement()),this.generatorsArray.push(t))},t.prototype.dumpProperties=function(){for(var t=[],e=0,n=this.generatorsArray;e<n.length;e++){var r=n[e];t.push(r.dumpProperties())}return t},t.prototype.addToHTML=function(t){this.htmlElement.appendChild(t)},t.prototype.calculateGeneratedPerSecond=function(){for(var t=0,e=0,n=this.generatorsArray;e<n.length;e++){t+=n[e].getClickGenerator().getClicksPerSecond()}return t},t}();n.GeneratorCollectionComponent=s},{"../model/events/ChangeEvent":53,"../utils/RxUtils":63,"rxjs/Subject":8}],46:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("./GeneratorEventWrapper"),c=t("./GeneratorHTMLElement"),u=t("rxjs/Subject"),r=function(){function t(t,e,n,r,o,i,s){this.subject=new u.Subject,this.generatorEventWrapper=new a.GeneratorEventWrapper(t,e,n,r,o,i),this.generatorHTMLElement=new c.GeneratorHTMLElement(t,e,r,i,s),this.generatorHTMLElement.addPropertyEventSource(this.generatorEventWrapper),this.generatorEventWrapper.addClickEventSource(this.generatorHTMLElement),this.generatorEventWrapper.subscribe(this.subject),this.generatorHTMLElement.subscribe(this.subject)}return t.prototype.setMathUtils=function(t){this.generatorEventWrapper.addMathUtils(t)},t.prototype.subscribe=function(t){this.subject.subscribe(t)},t.prototype.getObservable=function(){return this.subject},t.prototype.addVault=function(t){this.generatorEventWrapper.addMoneyEventSource(t),t.addMoneyEventSource(this.generatorEventWrapper)},t.prototype.addTimer=function(t){this.generatorEventWrapper.addTimeEventSource(t)},t.prototype.getClickGenerator=function(){return this.generatorEventWrapper.getClickGenerator()},t.prototype.getHtmlElement=function(){return this.generatorHTMLElement.getHTMLElement()},t.prototype.dumpProperties=function(){var t=this.getClickGenerator().dumpProperties();return t.className=this.generatorHTMLElement.getClassName(),t},t}();n.GeneratorComponent=r},{"./GeneratorEventWrapper":47,"./GeneratorHTMLElement":48,"rxjs/Subject":8}],47:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("rxjs/Subject"),c=t("../../model/ClickGenerator"),u=t("../../model/events/TimeChangeEvent"),l=t("../../model/events/MoneyChangeEvent"),f=t("../../model/events/ChangeEvent"),h=t("../../utils/RxUtils"),r=function(){function t(t,e,n,r,o,i){var s=this;this.subject=new a.Subject,this.handleTimeEvent=function(t){t instanceof u.TimeChangeEvent&&0<s.clickGenerator.getQuantity()&&(s.subject.next(new l.MoneyChangeEvent(s.clickGenerator.getClicks())),s.subject.next(new f.ChangeEvent("Sum",s.clickGenerator.getSum())))},this.handleMoneyEvent=function(t){if(t instanceof l.MoneyChangeEvent&&(s.clickGenerator.canChangeVisible(t.value)&&(s.clickGenerator.setVisible(),s.subject.next(new f.ChangeEvent("Visible",s.clickGenerator.getVisible()))),s.clickGenerator.canChangeEnabled(t.value))){var e=s.clickGenerator.changeEnabled();s.subject.next(new f.ChangeEvent("Enabled",e))}},this.handleClickEvent=function(t){if("Click"===t.propertyName){var e=s.clickGenerator.increaseQuantityByOne();s.subject.next(new l.MoneyChangeEvent(-1*e)),s.subject.next(new f.ChangeEvent("Price",s.clickGenerator.getPrice())),s.subject.next(new f.ChangeEvent("Quantity",s.clickGenerator.getQuantity())),s.subject.next(new f.ChangeEvent("GenPerSec",s.clickGenerator.getClicksPerSecond()))}},this.clickGenerator=new c.ClickGenerator(t,e,n,r,o,i),this.timeEventObserver=h.createObserver(this.handleTimeEvent,"error in GeneratorEventWrapper, timeEventObserver creator"),this.moneyEventObserver=h.createObserver(this.handleMoneyEvent,"error in GeneratorEventWrapper, moneyEventObserver creator"),this.clickEventObserver=h.createObserver(this.handleClickEvent,"error in GeneratorEventWrapper, clickEventObserver creator")}return t.prototype.addTimeEventSource=function(t){h.filterTimeEvents(t.getObservable(),this.getClickGenerator().getFrequency()).subscribe(this.timeEventObserver)},t.prototype.addMoneyEventSource=function(t){t.subscribe(this.moneyEventObserver)},t.prototype.addClickEventSource=function(t){t.subscribe(this.clickEventObserver)},t.prototype.getClickGenerator=function(){return this.clickGenerator},t.prototype.getObservable=function(){return this.subject},t.prototype.subscribe=function(t){this.subject.subscribe(t)},t.prototype.addMathUtils=function(t){this.clickGenerator.setMathUtils(t)},t}();n.GeneratorEventWrapper=r},{"../../model/ClickGenerator":51,"../../model/events/ChangeEvent":53,"../../model/events/MoneyChangeEvent":54,"../../model/events/TimeChangeEvent":55,"../../utils/RxUtils":63,"rxjs/Subject":8}],48:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/HTMLManipulationUtils"),c=t("../../model/events/ChangeEvent"),r=t("rxjs/Observable");t("rxjs/add/observable/fromEvent");var u=t("../../utils/RxUtils");t("rxjs/add/operator/filter");var o=function(){function t(t,e,n,r,o){var i=this;this.className=o,this.handlePropertyChange=function(t){t&&t instanceof c.ChangeEvent&&(i.handlePriceChange(t),i.handleEnabledChange(t),i.handleQuantityChange(t),i.handleVisibleChange(t),i.handleSumChange(t))},this.handlePriceChange=function(t){"Price"===t.propertyName&&i.htmlElement&&a.addTextToChild(".price",t.value+"",i.htmlElement)},this.handleQuantityChange=function(t){"Quantity"===t.propertyName&&i.htmlElement&&a.addTextToChild(".quantity",t.value+"",i.htmlElement)},this.handleVisibleChange=function(t){"Visible"===t.propertyName&&i.htmlElement&&a.toggleVisibility(i.htmlElement,!t.value)},this.handleEnabledChange=function(t){"Enabled"===t.propertyName&&i.htmlElement&&a.toggleDisability(i.htmlElement,t.value)},this.handleSumChange=function(t){"Sum"===t.propertyName&&i.htmlElement&&a.addTextToChild(".generated",t.value+"",i.htmlElement)};var s=a.createGeneratorElem(t,e,n,r,this.className);s&&(this.htmlElement=s,this.clickEventSource=this.createMouseClickObservable(),this.propertyEventObserver=u.createObserver(this.handlePropertyChange,"error in GeneratorHTMLElement, propertyEventObserver"))}return t.prototype.addPropertyEventSource=function(t){t.subscribe(this.propertyEventObserver)},t.prototype.getObservable=function(){return this.clickEventSource},t.prototype.subscribe=function(t){this.clickEventSource.subscribe(t)},t.prototype.getHTMLElement=function(){return this.htmlElement},t.prototype.getClassName=function(){return this.className},t.prototype.createMouseClickObservable=function(){var e=this;return r.Observable.fromEvent(this.htmlElement,"click").map(function(t){return e.htmlElement.hasAttribute("disabled")?null:new c.ChangeEvent("Click",e.htmlElement)}).filter(function(t){return!!t})},t}();n.GeneratorHTMLElement=o},{"../../model/events/ChangeEvent":53,"../../utils/HTMLManipulationUtils":61,"../../utils/RxUtils":63,"rxjs/Observable":5,"rxjs/add/observable/fromEvent":12,"rxjs/add/operator/filter":14}],49:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../model/events/TimeChangeEvent"),o=t("rxjs/Observable");t("rxjs/add/observable/interval"),t("rxjs/add/operator/map");var i=function(){function t(){this.timeGenerator=o.Observable.interval(1e3).map(function(t){return new r.TimeChangeEvent(t)})}return t.prototype.getObservable=function(){return this.timeGenerator},t.prototype.subscribe=function(t){this.timeGenerator.subscribe(t)},t}();n.Timer=i},{"../model/events/TimeChangeEvent":55,"rxjs/Observable":5,"rxjs/add/observable/interval":13,"rxjs/add/operator/map":15}],50:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("../model/Vault"),s=t("rxjs/Subject"),a=t("../model/events/ChangeEvent"),c=t("../model/events/MoneyChangeEvent"),u=t("../utils/HTMLManipulationUtils"),l=t("../utils/RxUtils"),r=function(){function t(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0);var o=this;this.subject=new s.Subject,this.handleMoneyEvent=function(t){t instanceof c.MoneyChangeEvent&&(o.vault.add(t.value),o.htmlElem&&u.addTextToChild(".value",o.vault.getValue()+"",o.htmlElem),o.subject.next(new c.MoneyChangeEvent(o.vault.getValue())))},this.handlePropertyChangeEvent=function(t){t instanceof a.ChangeEvent&&"ClicksPerSec"===t.propertyName&&(o.htmlElem&&u.addTextToChild(".per-second",t.value+"",o.htmlElem),o.vault.setGeneratedPerSecond(t.value))},this.vault=new i.Vault(e,n,r),this.createHTMLElements(t),this.moneyEventObserver=l.createObserver(this.handleMoneyEvent,"error in VaultComponent, moneyEventObserver"),this.propertyEventObserver=l.createObserver(this.handlePropertyChangeEvent,"error in VaultComponent, propertyEventObserver")}return t.prototype.addMoneyEventSource=function(t){t.subscribe(this.moneyEventObserver)},t.prototype.addPropertyEventSource=function(t){t.subscribe(this.propertyEventObserver)},t.prototype.dumpProperties=function(){return this.vault.dumpProperties()},t.prototype.getObservable=function(){return this.subject},t.prototype.subscribe=function(t){this.subject.subscribe(t)},t.prototype.createHTMLElements=function(t){var e=document.querySelector(t);e&&(this.htmlElem=e,this.htmlElem.appendChild(u.createSpan("value")),u.addTextToChild(".value",this.vault.getValue()+"",this.htmlElem),this.htmlElem.appendChild(u.createSpan("per-second")),u.addTextToChild(".per-second",this.vault.getGeneratedPerSecond()+"",this.htmlElem))},t}();n.VaultComponent=r},{"../model/Vault":52,"../model/events/ChangeEvent":53,"../model/events/MoneyChangeEvent":54,"../utils/HTMLManipulationUtils":61,"../utils/RxUtils":63,"rxjs/Subject":8}],51:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e,n,r,o,i){void 0===r&&(r=0),void 0===o&&(o=1),void 0===i&&(i=0),this.name=t,this.price=e,this.amount=n,this.quantity=r,this.frequency=o,this.sumGenerated=i,this.visible=!1,this.enabled=!1}return t.prototype.setMathUtils=function(t){this.mathUtils=t},t.prototype.getFrequency=function(){return this.frequency},t.prototype.getQuantity=function(){return this.quantity},t.prototype.setVisible=function(){this.visible=!0},t.prototype.getVisible=function(){return this.visible},t.prototype.increaseQuantityByOne=function(){this.quantity=this.quantity+1;var t=this.price,e=this.calculateNewPrice();return e?(this.price=e,t):0},t.prototype.getPrice=function(){return this.price},t.prototype.getName=function(){return this.name},t.prototype.getClicksPerSecond=function(){if(this.mathUtils)return this.mathUtils.calculateProductionPerSec(this.amount,this.quantity,this.frequency)},t.prototype.getClicks=function(){var t=this.calculateClicks();return this.sumGenerated=this.sumGenerated+t,t},t.prototype.changeEnabled=function(){return this.enabled=!this.enabled,this.enabled},t.prototype.canChangeVisible=function(t){return!this.visible&&t>=this.price/2},t.prototype.canChangeEnabled=function(t){return!this.enabled&&t>=this.price||this.enabled&&!(t>=this.price)},t.prototype.getSum=function(){return this.sumGenerated},t.prototype.dumpProperties=function(){return{name:this.name,price:this.price,amount:this.amount,quantity:this.quantity,frequency:this.frequency,sumGenerated:this.sumGenerated}},t.prototype.calculateNewPrice=function(){return this.mathUtils?this.mathUtils.calculateNextPrice(this.quantity,this.price):0},t.prototype.calculateClicks=function(){return this.mathUtils?this.mathUtils.calculateProduction(this.quantity,this.amount):0},t}();n.ClickGenerator=r},{}],52:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.value=t,this.totalSum=e,this.generatedPerSecond=n}return t.prototype.setGeneratedPerSecond=function(t){this.generatedPerSecond=t},t.prototype.getGeneratedPerSecond=function(){return this.generatedPerSecond},t.prototype.add=function(t){0<t&&(this.totalSum=this.totalSum+t);var e=this.value+t;this.value=0<=e?e:0},t.prototype.getTotalSum=function(){return this.totalSum},t.prototype.getValue=function(){return this.value},t.prototype.dumpProperties=function(){return{value:this.value,totalSum:this.totalSum,generatedPerSecond:this.generatedPerSecond}},t}();n.Vault=r},{}],53:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t,e){this.propertyName=t,this.value=e};n.ChangeEvent=r},{}],54:[function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(t){return e.call(this,"MoneyChangeEvent",t)||this}return o(t,e),t}(t("./ChangeEvent").ChangeEvent);n.MoneyChangeEvent=i},{"./ChangeEvent":53}],55:[function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){function t(t){return void 0===t&&(t=1),e.call(this,"TimeChangeEvent",t)||this}return o(t,e),t}(t("./ChangeEvent").ChangeEvent);n.TimeChangeEvent=i},{"./ChangeEvent":53}],56:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../utils/MathUtils");n.mathUtilsService=new r.MathUtils},{"../utils/MathUtils":62}],57:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("noty"),o=t("../utils/RxUtils"),i=t("./timer.service"),s=t("./storage.service"),a=function(){function t(){var e=this;this.saveAfter=60,this.nextTimeEvent=function(t){t&&e.vault&&e.vault.dumpProperties&&e.generatorCollection&&e.generatorCollection.dumpProperties&&s.storageService.save(e.vault,e.generatorCollection).then(function(){new r({type:"info",text:"Saved to local storage",timeout:6e3,progressBar:!1,layout:"bottomCenter"}).show()},function(){console.log("error occured while saving to localstorage")})},this.timeEventObserver=o.createObserver(this.nextTimeEvent,"error in SaveService, timeEventObserver"),this.addTimer(i.timerService)}return t.prototype.setVault=function(t){this.vault=t},t.prototype.setGeneratorCollection=function(t){this.generatorCollection=t},t.prototype.addTimer=function(t){var e=t.getObservable();o.filterTimeEvents(e,this.saveAfter).subscribe(this.timeEventObserver)},t}();n.saveService=new a},{"../utils/RxUtils":63,"./storage.service":58,"./timer.service":59,noty:3}],58:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("bluebird"),o=t("../settings/AppSettings"),i=t("localforage"),s=function(){function t(){}return t.prototype.config=function(){return new r(function(t,e){try{i.config(o.AppSettings.storageConfig),t(!0)}catch(t){e(t)}})},t.prototype.read=function(){return r.all([this.readVault(),this.readCollection()])},t.prototype.save=function(t,e){return r.all([this.saveVault(t),this.saveCollection(e)])},t.prototype.readVault=function(){return r.resolve(i.getItem("vault"))},t.prototype.readCollection=function(){return r.resolve(i.getItem("collection"))},t.prototype.saveVault=function(t){return r.resolve(i.setItem("vault",t.dumpProperties()))},t.prototype.saveCollection=function(t){return r.resolve(i.setItem("collection",t.dumpProperties()))},t}();n.storageService=new s},{"../settings/AppSettings":60,bluebird:1,localforage:2}],59:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../components/Timer");n.timerService=new r.Timer},{"../components/Timer":49}],60:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("localforage"),o=function(){function t(){}return t.storageConfig={driver:r.INDEXEDDB,name:"ClickerApp",version:1,size:4980736,storeName:"baza_Clicker",description:"baza lokalna apki Clicker"},t}();n.AppSettings=o},{localforage:2}],61:[function(t,e,n){"use strict";function s(t,e,n){if(n){var r=n.querySelector(t);r&&(r.textContent=e)}}function a(t,e){t.hasAttribute("disabled")&&e&&t.removeAttribute("disabled"),t.removeAttribute("disabled")||e||t.setAttribute("disabled","")}function c(t,e){t.style.display=e?"none":""}function u(t){var e=document.createElement("span");return e.classList.add(t),e.classList.add("display"),e}Object.defineProperty(n,"__esModule",{value:!0}),n.addTextToChild=s,n.toggleDisability=a,n.toggleVisibility=c,n.createGeneratorElem=function(t,e,n,r,o){var i=document.createElement("div");return i.classList.add("generator",o),i.appendChild(u("name")),i.appendChild(u("price")),i.appendChild(u("quantity")),i.appendChild(u("generated")),s(".name",t,i),s(".price",e+"",i),s(".quantity",n+"",i),s(".generated",r+"",i),a(i,!1),c(i,!(0<n)),i},n.createSpan=u},{}],62:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.calculateProduction=function(t,e){return Math.round(t*e)},t.prototype.calculateNextPrice=function(t,e){return 0<t&&0<e?Math.round(e*(1+.2*(t-1))):-1},t.prototype.calculateProductionPerSec=function(t,e,n){if(0<n)return t*e/n},t}();n.MathUtils=r},{}],63:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createObserver=function(t,e){return{next:t,error:function(t){console.log(e),console.log(t)},complete:function(){console.log("completed")}}},n.filterTimeEvents=function(t,e){return t.filter(function(t){return 0<t.value&&t.value%e==0})},n.filterMoneyEvents=function(t){return t.filter(function(t){return 0!==t.value})}},{}]},{},[43]);